!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){!function(e){if(!e.wap2app){var t="1.6.7";i(2);var n=i(6),o=i(7),r=i(9),a=i(11),s=i(12),p=i(16),l=i(10),c=i(17),h=i(19),u=i(20),d=i(21),w=i(22),f=i(14),v=i(23),m=i(18),_=i(24),b=i(25),g=i(15),y=i(26),O=i(13),I=i(27),x=i(29),W=i(33),k=i(35),T=i(32),A=!1,S=!1,E=!1,R=!1,B=!1,C=function(t){e.__wap2app_init||(e.__wap2app_init=!0,wap2app.shortcutConfig=t.shortcut||!1,n.plusReady(function(){S=new W(t);var i=plus.webview.currentWebview();A=i.id,B=plus.webview.getWebviewById(f.W2A_CONTEXT_ID),setTimeout(function(){var t=A===plus.runtime.appid;if(!t){var i=plus.webview.getLaunchWebview();i&&i.id===A&&(t=!0)}if(t){plus.storage.removeItem(f.W2A_CONTEXT_READY);var n=new k(S);"file:"===e.location.protocol?n.handleOldVersion():(B?plus.storage.setItem(f.W2A_CONTEXT_READY,"TRUE"):(r.plusReady(),H()),"about:"!==e.location.protocol&&q(A))}else A===f.W2A_CONTEXT_ID?(R=new x(S),plus.storage.setItem(f.W2A_CONTEXT_READY,"TRUE")):q(A)},0)}))},V=function(e,t,i,n){"undefined"==typeof n&&(n=!0),R?R.open("blank",plus.webview.getWebviewById(i||plus.runtime.appid),e,t,"href",n):B&&B.evalJS("wap2app&&wap2app.open('"+e+"','"+(t||"")+"','"+(i||A)+"',"+n+")")},P=function(e,t){return"undefined"==typeof t&&(t=!0),R?void R.back(e,t):E?void E.back():void(A!==plus.runtime.appid&&plus.webview.currentWebview().close("slide-out-right",300))},L=function(){R?R.close():B&&B.evalJS("wap2app&&wap2app.close()")},U=function(e){e=e||"",R?("string"==typeof e&&(e=JSON.parse(e)),R.show(e)):("object"==typeof e&&(e=JSON.stringify(e)),B&&B.evalJS("wap2app&&wap2app.show('"+e+"')"))},N=function(e){E&&E.fixed(e)},j=!1,D=!1,M=function(){if(j&&j.isVisible()){if(D)return;D=!0,r.quit(),setTimeout(function(){plus.runtime.quit()},100)}else j=u('\u518d\u6309\u4e00\u6b21\u8fd4\u56de\u952e\u9000\u51fa<br>\u70b9\u6b64\u53ef&nbsp;<span style="border-bottom:1px solid #fff" onclick="wap2app.openFeedback();">\u53cd\u9988\u610f\u89c1</span>')},H=function(){var e={opacity:0,zindex:-2,popGesture:"none"};B=plus.webview.create("_www/__wap2appcontext.html",f.W2A_CONTEXT_ID,e),B.show("none");var t=plus.webview.currentWebview();t.isVisible()&&t.show("none")},q=function(e){E||(E=new I(S.getWebviewOptionsById(e)))},F="__W2A_FEEDBACK",J=function(){plus.nativeUI.showWaiting();var e=S.globalOptions.feedback,t=e.url,i=e.params;"function"==typeof i&&(i=i()),n.isObject(i)&&(t=l.appendQuery(t,wap2app.extend(i,{p:"Android"===plus.os.name?"a":"iOS"===plus.os.name?"i":"",plus_version:plus.runtime.innerVersion,vendor:plus.device.vendor,md:plus.device.model})));var o=plus.webview.create(t,F);o.addEventListener("titleUpdate",function(){plus.nativeUI.closeWaiting(),o.show("slide-in-right",300)})};e.wap2app={version:t,os:o,log:r,SPA:a,dom:s,util:n,now:n.now,init:C,gps:i(28),config:function(e){try{e()}catch(t){console.error(t)}},show:U,open:V,quit:M,back:P,close:L,fixed:N,ajax:l,order:h,toast:u,report:d,bijia:c,setting:w,trigger:s.trigger,plusReady:n.plusReady,domReady:s.ready,extend:n.extend,iframe:_,confirm:b,support:g,openFeedback:J,previewImage:y,getStyles:s.getStyles,getCookie:v.get,setCookie:v.set,removeCookie:v.remove,injectStyle:s.injectStyle,getLocation:s.getLocation,ge:function(e){return-1!==n.versionCompare(t,e)},lt:function(e){return-1===n.versionCompare(t,t)},share:{init:p.init,open:function(t,i,n){t=t||{title:document.title,content:document.title,href:e.location.href},"string"==typeof t&&(t=JSON.parse(t)),p.open(t,i,n)}},getContext:function(){return R},isConfiged:function(e){return S.isConfiged(e)},getW2AOptions:function(){return S},currentWebview:function(){if(R){var e=R.currentContext();if(e){if(e instanceof T)return e.webview;if(e instanceof plus.webview.Webview)return e}return plus.webview.getTopWebview()}return plus.webview.getTopWebview()},currentW2AWebview:function(){return E},getArgs:m,createW2AView:function(e,t,i){var n=i&&plus.webview.getWebviewById(i);return n||(n=plus.webview.currentWebview()),new O(e,n,t)}}}}(window)},function(e,t,i){i(3),i(4),i(5),i(8)},function(e,t){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.splice.call(arguments,1),i=this,n=function(){var o=t.concat(Array.prototype.splice.call(arguments,0));return this instanceof n?void i.apply(this,o):i.apply(e,o)};return n.prototype=i.prototype,n}},function(e,t){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("Events"),n=!0;for(var o in t)"bubbles"===o?n=!!t[o]:i[o]=t[o];return i.initEvent(e,n,!0),i}"undefined"==typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i)},function(e,t,i){var n=i(6).plusReady,o=i(6).isObject,r=i(7);if(r.plus){navigator.geolocation.clearWatch=function(e){n(function(){plus.geolocation.clearWatch(e)})},navigator.geolocation.getCurrentPosition=function(e,t,i){o(i)&&i.timeout>0&&i.timeout<6e4&&(i.timeout=6e4),n(function(){+new Date;plus.geolocation.getCurrentPosition(function(t){e(r.stream&&r.qihoo?t:l(t))},function(e){e.PERMISSION_DENIED||(e.PERMISSION_DENIED=1,e.POSITION_UNAVAILABLE=2,e.TIMEOUT=3,e.UNKNOWN_ERROR=4),~[1,2,3].indexOf(e.code)||(e.code=3),t(e)},i)})},navigator.geolocation.watchPosition=function(e,t,i){n(function(){plus.geolocation.watchPosition(e,t,i)})};var a=3.141592653589793,s=6378245,p=.006693421622965943,l=function(e){if("gcj02"===e.coordsType){var t=c(e.coords.longitude,e.coords.latitude);e.coords.longitude=t[0],e.coords.latitude=t[1]}return e},c=function(e,t){if(d(e,t))return[e,t];var i=h(e-105,t-35),n=u(e-105,t-35),o=t/180*a,r=Math.sin(o);r=1-p*r*r;var l=Math.sqrt(r);return i=180*i/(s*(1-p)/(r*l)*a),n=180*n/(s/l*Math.cos(o)*a),mglat=t+i,mglng=e+n,[2*e-mglng,2*t-mglat]},h=function(e,t){var i=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,i+=2*(20*Math.sin(t*a)+40*Math.sin(t/3*a))/3,i+=2*(160*Math.sin(t/12*a)+320*Math.sin(t*a/30))/3},u=function(e,t){var i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,i+=2*(20*Math.sin(e*a)+40*Math.sin(e/3*a))/3,i+=2*(150*Math.sin(e/12*a)+300*Math.sin(e/30*a))/3},d=function(e,t){return 72.004>e||e>137.8347||.8293>t||t>55.8271||!1}}},function(e,t){var i=Array.isArray||function(e){return e instanceof Array},n=function(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype},o=function(e,t){if(t)for(var i in t){var r=e[i],a=t[i];n(a)?e[i]=o(r&&n(r)?r:{},a):"undefined"!==a&&(e[i]=a)}return e},r=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];i&&n(i)&&o(e,i)}return e},a=function(e,t,n){return"string"==typeof t?t===e:"function"==typeof t?(n.splice(0,0,e),t.apply(null,n)):i(t)?~t.indexOf(e):t instanceof RegExp?t.test(e):!1},s=function(e,t,i){var n=!0;return i=i||[],i.splice(0,0,e),t.matchHostnames&&(n=a(e.hostname,t.matchHostnames,i),"function"==typeof t.matchHostnames&&i.splice(0,1),null!==n&&!n)?!1:t.matchPathnames&&(n=a(e.pathname,t.matchPathnames,i),"function"==typeof t.matchHostnames&&i.splice(0,1),null!==n&&!n)?!1:t.title&&e.title&&(n=a(e.title,t.title,i),null!==n&&!n)?!1:n},p=function(e){window.plus&&window.plus.isReady?e():document.addEventListener("plusready",function(){e()},!1)},l=/\+/g,c=/([^&=]+)=?([^&]*)/g,h=function(e){var t={};if(e){var i=e.split("?");2===i.length&&(e=i[1])}if(e)for(var n;n=c.exec(e);)t[u(n[1])]=u(n[2]);return t},u=function(e){return decodeURIComponent(e.replace(l," "))},d=function(e,t){var i=h(t||location.search);return i.hasOwnProperty(e)?i[e]:""},w=Date.now||function(){return(new Date).getTime()},f=function(e,t,i){var n,o,r,a,s=0;i||(i={});var p=function(){s=i.leading===!1?0:w(),n=null,a=e.apply(o,r),n||(o=r=null)},l=function(){var l=w();s||i.leading!==!1||(s=l);var c=t-(l-s);return o=this,r=arguments,0>=c||c>t?(n&&(clearTimeout(n),n=null),s=l,a=e.apply(o,r),n||(o=r=null)):n||i.trailing===!1||(n=setTimeout(p,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=r=null},l},v=function(e,t,i){return e>i.left&&e<i.left+i.width&&t>i.top&&t<i.top+i.height},m=function(e,t){if(typeof e+typeof t!="stringstring")return!1;for(var i=e.split("."),n=t.split("."),o=0,r=Math.max(i.length,n.length);r>o;o++){if(i[o]&&!n[o]&&parseInt(i[o])>0||parseInt(i[o])>parseInt(n[o]))return 1;if(n[o]&&!i[o]&&parseInt(n[o])>0||parseInt(i[o])<parseInt(n[o]))return-1}return 0},_=function(){if("Android"!==plus.os.name)return plus.ios["import"]("WXApi").isWXAppInstalled();try{var e=plus.android.runtimeMainActivity().getPackageManager(),t=plus.android.importClass(e);return!!e.getPackageInfo("com.tencent.mm",t.GET_ACTIVITIES)}catch(i){}},b=function(){if(plus){var e=plus.runtime.innerVersion.split(".");return parseInt(e[e.length-1])}return 0},g=function(){return"HBuilder"===plus.runtime.appid},y=0,O=0;e.exports={now:w,time:function(e){var t=w();e&&(y=t,O=t),y||(y=t,O=t);var i=t-O;return O=w(),"[\u8017\u65f6\uff1a"+(t-y)+"\uff0c"+i+"]"},isDev:g,isObject:n,isArray:i,isMatch:s,extend:r,isCross:v,throttle:f,plusReady:p,parseParams:h,getUrlParam:d,versionCompare:m,isWechatInstalled:_,getRuntimeInnerVersion:b}},function(e,t){var i={android:!1,ios:!1,plus:!1,stream:!1,qihoo:!1,qihoobrowser:!1,wkwebview:!1},n=navigator.userAgent;n.match(/(Android);?[\s\/]+([\d.]+)?/)?i.android=!0:(n.match(/(iPhone\sOS)\s([\d_]+)/)||n.match(/(iPad).*OS\s([\d_]+)/))&&(i.ios=!0,window.webkit&&window.webkit.messageHandlers&&(i.wkwebview=!0)),n.match(/Html5Plus/i)&&(i.plus=!0,n.match(/StreamApp/i)&&(i.stream=!0,n.match(/qihoobrowser/i)?i.qihoobrowser=!0:n.match(/Qihoo/i)&&(i.qihoo=!0))),e.exports=i},function(e,t){document.elementFromPoint&&(document.elementsFromPoint||(document.elementsFromPoint=function(e,t){for(var i,n,o,r=[],a=[];(i=document.elementFromPoint(e,t))&&-1===r.indexOf(i)&&null!=i;)r.push(i),a.push({value:i.style.getPropertyValue("pointer-events"),priority:i.style.getPropertyPriority("pointer-events")}),i.style.setProperty("pointer-events","none","important");for(n=a.length;o=a[--n];)r[n].style.setProperty("pointer-events",o.value?o.value:"",o.priority);return r}))},function(e,t,i){var n=(i(6),i(10)),o=function(e,t){var i={appid:plus.runtime.appid,av:plus.runtime.version,imei:plus.storage.getItem("__DEVICE_ID")||plus.device.imei,vendor:plus.device.vendor,launcher:r(),model:plus.device.model,os:plus.os.version,lv:"",vb:plus.runtime.innerVersion,type:e,net:plus.networkinfo.getCurrentType(),sf:plus.runtime.launcher,message:t||"",w2a_version:wap2app.version};n.post("https://stream.dcloud.net.cn/frontend/startup",i,function(){})},r=function(){try{var e=plus.android.runtimeMainActivity(),t=plus.android.importClass("android.content.Intent"),i=new t("android.intent.action.MAIN");i.addCategory("android.intent.category.HOME"),plus.android.importClass("android.content.pm.PackageManager"),plus.android.importClass("android.content.pm.ResolveInfo");var n=e.getPackageManager(),o=n.resolveActivity(i,0);if(o){var r=o.plusGetAttribute("activityInfo");if(r){var a=r.plusGetAttribute("packageName");if(a&&"android"!==a)return a}}}catch(s){console.error&&console.error(s)}return""};e.exports={plusReady:function(){o(1)},pause:function(){o(2)},resume:function(e){o(3,e)},quit:function(){o(4)}}},function(e,t,i){var n=function(e){var t=[];if(e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.length?t.join("&"):""},o=function(e,t){return"string"!=typeof t&&(t=n(t)),(e+"&"+t).replace(/[&?]{1,2}/,"?")},r=function(e,t,i,r){"function"==typeof i&&(r=i,i=!1);var a=new plus.net.XMLHttpRequest;r&&(a.onreadystatechange=function(){4==a.readyState&&(200==a.status?r&&r(JSON.parse(a.responseText)):r&&r(!1))});var s=n(i);s&&"GET"===e&&(t=o(t,s)),a.open(e,t),"POST"===e&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("POST"===e?s:!1)};e.exports={post:function(e,t,i){r("POST",e,t,i)},get:function(e,t,i){r("GET",e,t,i)},serializeData:n,appendQuery:o}},function(e,t,i){var n=i(6),o=i(12),r=i(13),a=!1,s=[],p=function(e,t,i,o,p){busying=!0;var c=e,h=!1;n.isObject(e)&&(c=e.url,h=e.screenshot),"string"==typeof t&&(o=i,i=t,t=!1),i=i||plus.webview.currentWebview().id;var u=plus.webview.getWebviewById(i);wap2app.getContext()&&(s=wap2app.getContext().getWebviewContextById(i).history);var d=function(e,i){a=e,o===!0?u.evalJS('location.replace("'+c+'")'):o===!1&&u.evalJS('location.href="'+c+'"'),t&&t(e,i)},e=wap2app.getW2AOptions().getWebviewOptionsByUrl(c);if(e.screenshot&&e.screenshot.url&&(h=e.screenshot),!h||!h.url)return void d(!1);var w=function(){var t=new r(l(c,h),u,h);t.show(e.show.aniShow,e.show.duration,function(i){i?d(t,e):d(!1),p||setTimeout(function(){t.close(h.animation.type,h.animation.duration,function(){setTimeout(function(){t.clear()},h.animation.delay)})},e.delay)})},f=new plus.nativeObj.Bitmap(c+"_"+Math.random());u.draw(f,function(){!o&&s.push(f.id),w()},function(){f.clear(),f=null,!o&&s.push(!1),w()})},l=function(e,t){if("function"==typeof t.handle){var i=o.getLocation(e);return t.handle(i.pathname,i)}return t.url},c=function(e,t,i,o){if(!a||!a.isVisible()){var p=!1,l=!1;"string"==typeof i?(p=i,l=plus.webview.getWebviewById(p),i=function(e){l&&l.back()},wap2app.getContext()&&(s=wap2app.getContext().getWebviewContextById(p).history)):(l=plus.webview.currentWebview(),p=l.id),"string"==typeof o&&(o=JSON.parse(o)),e=e||"pop-out",t=t||200,o=n.extend({showWaiting:!1,delay:200,animation:{type:"shrink",duration:200,delay:0,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},o);var c=s.pop();if(c){var h=new r(c,l,{animation:o.animation});h.show(e,t,function(e){e?i&&i(!0,function(){o.showWaiting&&plus.nativeUI.showWaiting(),setTimeout(function(){h.close("shrink",200,function(){h.clear();var e=plus.nativeObj.Bitmap.getBitmapById(c);e&&e.clear(),o.showWaiting&&plus.nativeUI.closeWaiting()})},o.delay)}):i&&i(!1)})}else i&&i(!1)}};e.exports={open:p,back:c}},function(e,t,i){var n,o=i(6),r=/complete|loaded|interactive/,a=function(e){r.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){e()},!1)},s=function(e,t,i,n){e&&(t=t||"click",n=o.extend({fastclick:{className:"needsclick"}},n||{}),"click"===t&&n.fastclick&&(e.className=e.className+" "+n.fastclick.className),e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0})),"click"===t&&n.fastclick&&(e.className=e.className.replace(" "+n.fastclick.className,"")))},p=function(e){var t=function(){var t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)};document.head?t():a(function(){t()})},l=function(e,t){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?i.getPropertyValue(t)||i[t]:i},c=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},h=["hash","host","hostname","href","origin","pathname","port","protocol","search"],u=document.createElement("a"),d=function(e,t){u.href=e;for(var i={title:t},n=0,o=h.length;o>n;n++){var r=h[n];i[r]=u[r]}return i},w=function(e,t,i){var n={};o.isObject(i)?(n=i,n.expires=0===n.expires?0:n.expires||1):n.expires=0===i?0:i||1;var r=new Date;r.setTime(r.getTime()+24*n.expires*60*60*1e3);var a="expires="+r.toUTCString(),s=n.path||"/",p=n.domain||"";document.cookie=e+"="+t+"; path="+s+"; "+(p?"domain="+p+"; ":"")+a+"; "},f=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},v=function(e,t){o.isObject(t)||(t={}),t.expires=-1,w(e,"",t)},m=function(e){return"string"==typeof e&&(e=document.querySelector(e)),e?"none"!==l(e,"display")&&e.offsetHeight>0&&e.offsetWidth>0:!1},_=function(){if(null!=n)return n;var e=window.pageXOffset?window.pageXOffset+window.innerWidth-1:0,t=window.pageYOffset?window.pageYOffset+window.innerHeight-1:0;return 0===e&&0===t?!0:n=!document.elementFromPoint(e,t)},b=function(e,t){return document.elementFromPoint?(_()||(e+=window.pageXOffset,t+=window.pageYOffset),document.elementFromPoint(e,t)):!1},g=function(e,t){return document.elementsFromPoint?(_()||(e+=window.pageXOffset,t+=window.pageYOffset),document.elementsFromPoint(e,t)):!1},y=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/,O=function(e){var t=e.match(y);return t&&5===t.length?[t[1],t[2],t[3],t[4]]:!1},I=function(e){e=e||{x:30,y:30};var t=g(e.x,e.y);if(!t)return!1;for(var i=document.documentElement,n=document.body,o=0,r=t.length;r>o;o++){var a=t[o];if(a!==n&&a!==i)return!1}return!0},x=function(e){return!(!e||!~e.innerText.indexOf("\u4e0b\u8f7d"))},W=function(e,t){if(!e)return!1;if("string"==typeof e&&(e=document.querySelector(e)),!e)return!1;t=t||{x:1,y:100};var i=e.offsetWidth,n=e.offsetHeight,o=window.innerWidth-2*t.x,r=window.innerHeight-2*t.y;if(!(i>0&&n>0&&i>=o&&n>=r))return!1;var a=l(e),s=function(e,t){return e.getPropertyValue(t)||e[t]},p=s(a,"opacity");if(1>p&&p>0)return!0;var c=O(s(a,"backgroundColor"));if(c){var h=parseFloat(c[3]);if(1>h&&h>0)return!0}return!1},k=function(e){if(!e)return!0;var t=e.point,i=e.minWidth,n=e.maxHeight,o=e.handle||function(e){return e.offsetWidth>=i&&e.offsetHeight<=n},r=g(t.x,t.y);if(r){for(var a=document.documentElement,s=document.body,p=0,l=r.length;l>p;p++){var c=r[p];if(c===s||c===a)break;var h=o(c);if(h!==!1)return c}return!1}return!0},T=function(){return document.documentElement?document.documentElement.clientWidth:plus?plus.screen.resolutionWidth:0};e.exports={clientWidth:T(),ready:a,trigger:s,getRGBA:O,setCookie:w,getCookie:f,removeCookie:v,isVisible:m,getStyles:l,getLocation:d,injectStyle:p,elementMatch:c,detectHead:k,detectMask:W,detectBlank:I,detectDownloadTips:x,elementFromPoint:b,elementsFromPoint:g}},function(e,t,i){var n=i(6),o=i(14),r=i(15),a=function(e,t,i,o){this.id=e,n.isObject(t)?(this.styles=t,this.webview=i,this.options=o):(this.options=i,this.webview=t,this.styles=!1),this.view=!1,this.bitmap=!1,this.isRecycle=!0,this.visible=!1,this.animated=!1,this.title=!1,this.aniShow="pop-in",this.stopped=!1,this.drewTexts=!1,this.firstView=!1,this.secondView=!1,this.w2aContext=wap2app.getContext(),this._init()},s=a.prototype;s._init=function(){if(this.styles)this.view=new plus.nativeObj.View(this.id,this.styles);else{if(this.bitmap=this._getBitmapById(this.id),!this.bitmap)return;this.view=this._getViewById(o.W2A_VIEW_ID)}},s._getViewById=function(e){return this.w2aContext?this.w2aContext.getViewById(e):plus.nativeObj.View.getViewById(e)},s._getBitmapById=function(e){return this.w2aContext?this.w2aContext.getBitmapById(e):plus.nativeObj.Bitmap.getBitmapById(e)},s.setTitle=function(e){e&&!this.title&&(this.title=e,this.drawTexts(this.view,[n.extend(this.options.title,{text:e})]))},s.show=function(e,t,i,n){if(this.aniShow=e,!this.view)return this.visible=!1,i&&i(!1),!1;if(!e||"none"===e){if(this.webview&&~[o.W2A_BITMAP_ID,o.W2A_OTHER_BITMAP_ID].indexOf(this.bitmap.id)){var a=this.webview;a=a.parent()||a,a.draw(this.bitmap,function(){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this.drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0)}.bind(this),function(e){this.visible=!1,i&&i(!1)})}else this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this.drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0);return!0}if("slide-in-right"===e){if(this.visible=!0,this.animated=!1,r.titlebar()&&plus.nativeUI.isTitlebarVisible()){var s=this.options.crop,p=plus.screen.resolutionHeight-plus.navigator.getStatusbarHeight(),l=p-plus.nativeUI.getTitlebarHeight(),c={top:0,height:l-s},h={top:p-s,height:s},u={top:l-s,height:s};this.view.drawBitmap(this.bitmap,c,c),this.view.drawBitmap(this.bitmap,h,u)}else this.view.drawBitmap(this.bitmap);return this.drawTexts(this.view,this.options.drawText),this.firstView=this.view,this.secondView=null,plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){n&&n(!0)}),i&&i(!0),!0}this.relatedView=this._getViewById(o.W2A_OTHER_VIEW_ID);var d=this._getBitmapById(o.W2A_OTHER_BITMAP_ID);if(this.relatedView&&d){var a=this.webview,w=function(o){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),o&&(this.relatedView={bitmap:o}),this.drawTexts(this.view,this.options.drawText),this.firstView=this.relatedView,this.secondView=this.view,"pop-out"===e&&(this.firstView=this.view,this.secondView=this.relatedView),plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){n&&n(!0)}),i&&i(!0)};if(!a)return void("pop-in"===e||"pop-out"===e?w.call(this,!1):(this.visible=!1,i&&i(!1)));a=a.parent()||a,a.draw(d,function(){w.call(this,d)}.bind(this),function(t){"pop-in"===e||"pop-out"===e?w.call(this,!1):(this.visible=!1,i&&i(!1))}.bind(this))}else this.visible=!1,i&&i(!1)},s.back=function(e,t,i){var n=this,o=function(){plus.nativeObj.View.clearAnimation(),n.hide(),n.reset(),n.recycle(),n.visible=!1};"function"==typeof this.view.setTouchEventRect&&this.firstView?plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){o()}):o()},s.close=function(e,t,i){if(this.visible){var n=this.options.animation;"pop-out"===this.aniShow?(this.animated=!0,i&&i(!0)):this.view.animate({type:e,duration:t,frames:n.frames,region:n.region},function(){this.animated=!0,i&&i(!0)}.bind(this))}else i&&i(!1)},s.setStopped=function(e){this.stopped=e},s.clear=function(e){this.visible&&(this.stopped,this.animated?(plus.nativeObj.View.clearAnimation(),this.hide(),this.reset(),this.recycle(),this.visible=!1,e&&e()):this.clearTimer=setTimeout(function(){this.clear(e)}.bind(this),200))},s.isVisible=function(){return this.visible},s.hide=function(){var e=this._getViewById(o.W2A_VIEW_ID);e&&e.hide(),e=this._getViewById(o.W2A_OTHER_VIEW_ID),e&&e.hide()},s.reset=function(){var e=this._getViewById(o.W2A_VIEW_ID);e&&e.reset(),e=this._getViewById(o.W2A_OTHER_VIEW_ID),e&&e.reset()},s.setRecycle=function(e){this.isRecycle=e,!this.isRecycle},s.recycle=function(){if(r.bitmapRecycle()){var e=this._getViewById(o.W2A_BITMAP_ID);e&&e.recycle&&e.recycle(),e=this._getViewById(o.W2A_OTHER_BITMAP_ID),e&&e.recycle&&e.recycle(),this.isRecycle&&this.bitmap&&!~[o.W2A_BITMAP_ID,o.W2A_OTHER_BITMAP_ID].indexOf(this.bitmap.id)&&"_header"!==this.bitmap.id.substr(-7)&&this.bitmap.recycle&&this.bitmap.recycle()}},s._drawRect=function(){if(this.options.matchPathnames){var e=this.options.placeholder,t=this.options.animation.region,i=this._getDst(t.top),n=this._getDst(t.bottom),o=window.innerHeight,a=plus.navigator.getStatusbarHeight();a&&(o=plus.screen.resolutionHeight-a),r.titlebar()&&plus.nativeUI.isTitlebarVisible()&&(o-=plus.nativeUI.getTitlebarHeight()),o=o-i-n,this.view.drawRect(e,{top:i,height:o})}},s._getDst=function(e){if("number"==typeof e)return parseInt(e,10);if("string"==typeof e){if(-1!==e.indexOf("px",e.length-2))return parseInt(e,10);var t=document.querySelector(e);return t&&t.offsetHeight||0}if("function"==typeof e){var e=parseInt(e(),10);return e||0}return 0},s._ellipsis=function(e,t){if(!e)return"";if(!t||e.replace(/[^\x00-\xff]/g,"**").length<=t)return e;for(var i=0,n="",o=0;o<e.length;o++)if(n+=e.charAt(o),e.charCodeAt(o)>128){if(i+=2,i>t)return n.substring(0,n.length-1)+"..."}else if(i+=1,i>t)return n.substring(0,n.length-2)+"...";return e},s.drawTexts=function(e,t){if("function"==typeof t&&(t=t(),t&&n.isObject(t)&&(t=[t])),t&&n.isArray(t)&&t.length){for(var i=0;i<t.length;i++){var o=t[i];if(o.text){var r=o.text;"function"==typeof r&&(r=r()),r&&(e.drawText(this._ellipsis(r,o.max||25),o.dst,o.styles),this.drewTexts=!0)}}return t}return!1},e.exports=a},function(e,t){e.exports={SCREENSHOT_PATH:"_www/__wap2app/screenshot/",W2A_WEBVIEW_ID:"__W2A_WEBVIEW_ID_",W2A_SCREENSHOT_WEBVIEW_ID:"__W2A_SCREENSHOT",W2A_SCREENSHOT_VERSION:"__W2A_SCREENSHOT_VERSION",W2A_LAUNCH_WEBVIEW_ID:"launch",W2A_CPS_WEBVIEW_ID:"__W2A_CPS",W2A_TEMPORARY_WEBVIEW_ID:"__W2A_TEMPORARY",W2A_APP_NAME:"__W2A_APP_NAME",W2A_CONTEXT_READY:"__W2A_READY",W2A_WEBVIEW_LOADING:"__W2A_WEBVIEW_LOADING_",W2A_WEBVIEW_BACKING:"__W2A_WEBVIEW_BACKING_",W2A_WEBVIEW_RELOAD:"__W2A_WEBVIEW_RELOAD_",W2A_BITMAP_ID:"__W2A_BITMAP",W2A_OTHER_BITMAP_ID:"__W2A_OTHER_BITMAP",W2A_VIEW_ID:"__W2A_VIEW",W2A_OTHER_VIEW_ID:"__W2A_OTHER_VIEW",W2A_GROUP_SPLIT:"__W2A_GROUP__",W2A_CONTEXT_ID:"__W2A_CONTEXT_",W2A_BROWSER_ID:"__W2A_BROWSER_",W2A_OVERRIDE_IGNORE:["tel:","mailto:","callto:","weixin:","alipay:","alipayqr:","weibo:","mqq:","mqqapi:"],W2A_OVERRIDE_MATCH:"^(http|https|ftp|tel|mailto|callto|weixin|alipay|alipayqr|weibo|mqq|mqqapi).*",W2A_BROWSER_CHILD_ID:"__W2A_WEBVIEW_ID_BROWSER_CHILD_",W2A_GPS_TIME:"__W2A_GPS_TIME",W2A_ACTIVE_CLASS:"__W2A_ACTIVE",W2A_IFRAME_CLASS:"__W2A_IFRAME",W2A_IFRAME_STYLES:"-webkit-transform:translate(0px, -100%);position: fixed;background: transparent;left: 0;top: 0;right: 0;bottom: 0;width:100%;height:100%;z-index: 2147483647;border:0;"}},function(e,t,i){var n=i(7);e.exports={bijia:function(){var e=plus.runtime.innerVersion.split(".");return n.qihoobrowser&&parseInt(e[e.length-1])>=27821},titlebar:function(){return n.qihoobrowser&&plus.nativeUI.getTitlebarHeight},bitmapRecycle:function(){var e=plus.runtime.innerVersion.split(".");return parseInt(e[e.length-1])>=27035},nativeObj:function(){return plus.nativeObj.hasOwnProperty("View")},restore:function(){var e=plus.runtime.innerVersion.split(".");return parseInt(e[e.length-1])>=27610}}},function(e,t,i){function n(e,t,i){var n=h[e];return n?void(n.authenticated?o(n,t,i):n.authorize(function(){o(n,t,i)},function(e){plus.nativeUI.alert("\u8ba4\u8bc1\u6388\u6743\u5931\u8d25"),i&&i(!1)})):(plus.nativeUI.alert("\u65e0\u6548\u7684\u5206\u4eab\u670d\u52a1["+e+"]"),void(i&&i(!1)))}function o(e,t,i){e.send(t,function(){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u6210\u529f\uff01'),i&&i(!0)},function(t){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u5931\u8d25\uff01'),i&&i(!1)})}function r(e,t,i){l.android&&d||t&&t(!1);var n=plus.android.importClass("android.content.Intent");if(s&&n){var o=new n(n.ACTION_SEND);o.setType("text/plain"),o.putExtra(n.EXTRA_TEXT,e.content),o.setFlags(n.FLAG_ACTIVITY_NEW_TASK),s.startActivity(n.createChooser(o,i||"\u7cfb\u7edf\u5206\u4eab")),t&&t(!0)}else t&&t(!1)}function a(e,t,i){if(!d)return void(t&&t(!1));if(e.href&&c.post("http://m3w.cn/sd/reg",{appid:plus.runtime.appid,deviceid:plus.storage.getItem("__DEVICE_ID")||plus.device.imei,wap:e.href,stream:"url="+encodeURIComponent(e.href)},function(t){t&&0===t.ret&&(e.href=t.surl)}),!l.qihoobrowser&&!u&&h.weixin&&p.isWechatInstalled())plus.nativeUI.actionSheet({title:i||"\u5206\u4eab\u5230",cancel:"\u53d6\u6d88",buttons:[{title:"\u5fae\u4fe1\u6d88\u606f"},{title:"\u5fae\u4fe1\u670b\u53cb\u5708"},{title:"\u66f4\u591a\u5206\u4eab"}]},function(o){var a=o.index;switch(a){case 1:e.extra={scene:"WXSceneSession"},n("weixin",e,t);break;case 2:e.title=e.content,e.extra={scene:"WXSceneTimeline"},n("weixin",e,t);break;case 3:var s=e.href?"\uff08"+e.href+"\uff09":"";e.title=e.title+s,e.content=e.content+s,r(e,t,i)}});else{var o=e.href?"\uff08"+e.href+"\uff09":"";e.title=e.title+o,e.content=e.content+o,r(e,t)}}var s,p=i(6),l=i(7),c=i(10),h={},u=!1,d=!1,w=function(){var e=plus.runtime.innerVersion.split(".");u=e[e.length-1]<20133,l.android&&(s=plus.android.runtimeMainActivity()),u||plus.share.getServices(function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];h[n.id]=n}}),d=!0};e.exports={init:w,open:a,openSystem:r}},function(e,t,i){var n=i(6),o=i(10),r=i(18),a="__W2A_BIJIA_KEYWORD",s="__W2A_BIJIA_KEYWORD_TYPE",p="__W2A_BIJIA_KEYWORD_ARGS",l={"__W2A__m.taobao.com":{id:"__W2A__m.taobao.com",name:"\u6dd8\u5b9d",url:"https://ai.m.taobao.com/search.html?q={{keyword}}",menuFilter:function(e){return"__W2A__m.jd.com"===e.id?!1:void 0},matchPathnames:function(e,t){return~["detail.m.tmall.com","detail.m.tmall.hk","detail.tmall.com","detail.tmall.hk"].indexOf(t.hostname)&&~["/item.htm","/hk/item.htm"].indexOf(e)?!0:"ai.m.taobao.com"==t.hostname&&"/search.html"==e?!0:~e.indexOf("/awp/core/detail.htm")||"item.taobao.com"==t.hostname&&"/item.htm"==~e?!0:~t.href.indexOf("h5.m.taobao.com/app/daojia/www/itemdetails/index.html")?!0:~e.indexOf("m/jusp/alone/detailwap/mtp.htm")?!0:!!~t.href.indexOf("1.ju.taobao.com/lucky/item.htm")},keyword:function(e,t){var i=t.hostname,n=/^\s+|\s+$/g,o=/\\u3010?.*?\\u3011/g,r=/detail\.m\.tmall/,a=/.*?\-/,s=document.querySelector('#J_Search input[type="search"]'),p=document.querySelector(".searchbar_wrap ul li label"),l=document.querySelector("#m-header .main .search"),c=document.querySelector(".trip-search-form .trip-search-input.ac-input");if(s&&s.value.replace(n,""))return{type:"search",keyword:s.value};if(p&&p.innerText.replace(n,""))return{type:"search",keyword:p.innerText};if(l&&l.innerText.replace(n,"")&&"\u641c\u7d22\u5929\u732b\u8d85\u5e02"!==l.innerText)return{type:"search",keyword:l.innerText};if(c&&c.value.replace(n,""))return{type:"search",keyword:c.value};var h="ai.m.taobao.com",u="/search.html";if(t.hostname===h&&e===u){var d=document.querySelector('.input-search input[type="search"]');if(d&&d.value)return{type:"search",keyword:d.value}}if(i.match(r)&&"/item.htm"===e){var w=document.querySelector("#s-title .main h1");if(w)return{type:"detail",keyword:w.innerText.replace(o,"")}}if(~t.href.indexOf("h5.m.taobao.com/awp/core/detail.htm")){var w=document.querySelector("#J_detail_main .dt-info .dtif-h,.title_share h1 span");if(w)return{type:"detail",keyword:w.innerText}}if(~t.href.indexOf("h5.m.taobao.com/app/daojia/www/itemdetails/index.html")){var w=document.querySelector("#J_ItemDetail .item-name");if(w)return{type:"detail",keyword:w.innerText.replace(a,"").replace(o,"")}}if(~t.href.indexOf("ju.taobao.com/m/jusp/alone/detailwap/mtp.htm")){var w=document.querySelector("#J_itemInfo .item-info h1");if(w)return{type:"detail",keyword:w.innerText.replace(a,"").replace(o,"")}}if(~t.href.indexOf("1.ju.taobao.com/lucky/item.htm")){var w=document.querySelector("#J_Main_Page .good-info .good-name");if(w)return{type:"detail",keyword:w.innerText.replace(o,"").replace("\u5956\u54c1","")}}}},"__W2A__m.jd.com":{id:"__W2A__m.jd.com",name:"\u624b\u673a\u4eac\u4e1c",url:"http://so.m.jd.com/ware/search.action?&keyword={{keyword}}",menuFilter:function(e){return"__W2A__m.taobao.com"===e.id?!1:void 0},matchPathnames:function(e,t){return!!(/\/products\/([0-9]+)-([0-9]+)-([0-9]+)\.html/.test(e)||~["/ware/search.action","/ware/view.action"].indexOf(e)||/^\/product\/[0-9]+\.html/.test(e))},keyword:function(e,t){if(/\/products\/([0-9]+)-([0-9]+)-([0-9]+)\.html/.test(e)||~["/ware/search.action"].indexOf(e)){var i=document.getElementById("layout_newkeyword");if(i)return{type:"search",keyword:i.value.replace(/(\u3010.*\u3011|\u4eac\u4e1c\u81ea\u8425|\u81ea\u8425|\u4eac\u4e1c\u8d85\u5e02|\u81ea\u8425\u6781\u901f\u8fbe|\u5305\u90ae\u5230\u5bb6)/g,"")}}else if(~["/ware/view.action"].indexOf(e)||/^\/product\/[0-9]+\.html/.test(e)){var i=document.querySelector(".title-text");if(i)return{type:"detail",keyword:i.innerText.replace(/(\u3010.*\u3011|\u4eac\u4e1c\u81ea\u8425|\u81ea\u8425|\u4eac\u4e1c\u8d85\u5e02|\u81ea\u8425\u6781\u901f\u8fbe|\u5305\u90ae\u5230\u5bb6)/g,"")}}}},H52588A9C:{id:"H52588A9C",name:"\u552f\u54c1\u4f1a",url:"",matchPathnames:function(e,t){return!!(-1!=e.indexOf("product-")&&-1==e.indexOf("size.html")||/classify-detail-.*/.test(e))},keyword:function(e,t){if(0===e.indexOf("/product-")||0===e.indexOf("/preheating-product-")){var i=document.querySelector("title");if(i){var n="";if("\u552f\u54c1\u4f1a\u624b\u673a\u7248"==i.innerText)n=document.querySelector(".product-name").innerText;else{n=i.innerText.replace(/(-\u552f\u54c1\u4f1a|- \u552f\u54c1\u4f1a|\u552f\u54c1\u4f1aVIP|VIP|\u552f\u54c1\u4f1a)/g,"").replace(/\[.*\]/g,"");var o=n.indexOf("\u4e13\u573a");if(~o){var r=n.substr(0,o),a=n.substr(o+2);n=~a.indexOf(r)?a:r+" "+a;
}}return{type:"detail",keyword:n}}}}},"__W2A__m.yhd.com":{id:"__W2A__m.yhd.com",name:"\u4e00\u53f7\u5e97",url:"http://search.m.yhd.com/search/k{{keyword}}",matchPathnames:function(e,t){var i=t.hostname,n="search.m.yhd.com",o=/search\/k.*/;if(i===n&&e.match(o))return!0;var r=/detail\/\d+$/;if(e.match(r))return!0;var a=/mingpin\/item/;if(e.match(a))return!0;var s=/item\/\d+/,p=/item\/[a-z]+\/[0-9]+/,l="/ad-dolphin-go/go";if(e.match(s)||e.match(p)||~e.indexOf(l))return!0;var c=/try\/free\/.*/,h=/try\/fee\/.*/;return e.match(c)||e.match(h)?!0:void 0},keyword:function(e,t){var i=/^\s+|\s+$/g,n="1\u53f7\u751f\u9c9c",o="\u81ea\u8425",r=/Item.*/,a=/\\u3010.*?\\u3011/,s=/[\(|\uff08].*?[\)|\uff09]/g;if(~e.indexOf("/search")){var p=document.querySelector("#searchForm .search_txt"),l=document.querySelector(".title li");if(p&&p.value.replace(i,""))return{type:"search",keyword:p.value};if(l)return{type:"search",keyword:l.innerText}}if(e.match(/detail\/[0-9]+$/)){var l=document.querySelector(".detail_info h2");if(l)return{type:"detail",keyword:l.innerText.replace(o,"").replace(a,"")}}if(e.match(/item\/[0-9]+/)||e.match(/item\/[a-z]+\/[0-9]+/)||~e.indexOf("/ad-dolphin-go/go")){var l=document.querySelector(".pd_product-title-box .pd_product-title,.title-box h2");if(l)return{type:"detail",keyword:l.innerText.replace(o,"").replace(r,"").replace(a,"").replace(s,"").replace(n,"")}}if(e.match(/mingpin\/item/)){var l=document.querySelector(".product-info .info");if(l)return{type:"detail",keyword:l.innerText.replace(o,"").replace(a,"")}}if(e.match(/try\/free\/.*/)){var l=document.querySelector(".title_box h2");if(l)return{type:"detail",keyword:l.innerText}}if(e.match(/try\/fee\/.*/)){var l=document.querySelector(".title_inner h2");if(l)return{type:"detail",keyword:l.innerText}}}},"__W2A__amazon.cn":{id:"__W2A__amazon.cn",name:"\u4e9a\u9a6c\u900a",url:"https://www.amazon.cn/gp/aw/s/ref=is_s_ss_i_0_1?k={{keyword}}",matchPathnames:function(e,t){return 0===e.indexOf("/gp/aw/d/")||0===e.indexOf("/gp/aw/s/")?!0:void 0},keyword:function(e,t){if(0===e.indexOf("/gp/aw/d/"))return{type:"detail",keyword:document.title};var i=document.getElementById("nav-search-keywords");return i?{type:"search",keyword:i.value}:(i=document.getElementById("searchKeyword"),i?{type:"search",keyword:i.value}:void 0)}},__W2A__H5F4563E8:{id:"__W2A__H5F4563E8",name:"\u8611\u83c7\u8857",webview:"search",url:"http://m.mogujie.com/wall/s?q={{keyword}}",urlFilter:function(e){return e.replace(/%20/g,"+")},matchPathnames:function(e,t){return!(0!==e.indexOf("/wall/s")&&0!==e.indexOf("/v8/meili/shopSearch")&&!/(\/x6\/detail\/)|(\/detail\/)|(\/rush\/seckill\/)/.test(e)&&0!==e.indexOf("/mgj-detail-modou-jiajiagou/index.html"))},keyword:function(e,t){if(0===e.indexOf("/wall/s")){var i=document.getElementById("J_search_keywords");if(i)return{type:"search",keyword:i.value};var n=document.getElementsByTagName("meta").keywords;if(n){var o=n.getAttribute("content");if(o)return{type:"search",keyword:o.split(",")[0]}}var r=document.title;return{type:"search",keyword:r.substring(r.indexOf("\u3010")+1,r.lastIndexOf("\u3011"))}}if(0===e.indexOf("/v8/meili/shopSearch")){var i=document.querySelector("#M_headBar .title");if(i)return{type:"search",keyword:i.innerText}}else{if(/(\/x6\/detail\/)|(\/detail\/)|(\/rush\/seckill\/)/.test(e)){var r=document.title;return r=r.substring(r.indexOf("\u3010")+1,r.lastIndexOf("\u3011")),r.indexOf("\u3011")&&(r=r.substring(r.indexOf("\u3011")+1)),r.indexOf("\u25cf")&&(r=r.substring(r.indexOf("\u25cf")+1)),r.indexOf("\uff09")&&(r=r.substring(r.indexOf("\uff09")+1)),r.indexOf("}")&&(r=r.substring(r.indexOf("}")+1)),{type:"detail",keyword:r}}if(0===e.indexOf("/mgj-detail-modou-jiajiagou/index.html")){var r=document.title;return r.indexOf("\u3011")&&(r=r.substring(r.indexOf("\u3011")+1)),{type:"detail",keyword:r}}}}},"__W2A__m.dangdang.com":{id:"__W2A__m.dangdang.com",name:"\u5f53\u5f53\u7f51",url:"http://search.m.dangdang.com/search.php?keyword={{keyword}}",urlFilter:function(e){return e.replace(/%20/g,"+")},matchPathnames:function(e,t){return!(0!==e.indexOf("/search.php")&&("product.m.dangdang.com"!=t.hostname||!/^\/\d+\.html/.test(e)&&"/mobile_cost.php"!=e&&"/product.php"!=e))},keyword:function(e,t){if(0===e.indexOf("/search.php")){var i=document.getElementById("j_keywords");if(i)return{type:"search",keyword:i.value.split(" ")[0]}}else if(/^\/\d+\.html/.test(e)||"/mobile_cost.php"==e||"/product.php"==e){var i=document.querySelector("article");if(i)return{type:"detail",keyword:i.innerText}}}}},c=!1,h=!0,u=[],d=function(e){return e&&(e=e.replace(/(\u6dd8\u5b9d|\u4eac\u4e1c|\u552f\u54c1\u4f1a|\u4e00\u53f7\u5e97|\u8611\u83c7\u8857|\u4e9a\u9a6c\u900a|\u5f53\u5f53)/g,""),e=e.replace(/[+`~!$%^*=|{}:;\\\/?<>\u2026\u2014\uff1c\uff1e\uff01\uff1b\uff1a\u201d\u201c\u3002\uff1f]+/g," ").replace(/^\s+|\s+$/g,"").replace(/\'/g,"\\u0027")),e},w=function(e){u=[];var t=plus.runtime.appid,i=l[t];if(i){for(var n in l)if(l.hasOwnProperty(n)){var o=l[n];if(o.url||n===t){var r=!0;i.menuFilter&&i.menuFilter(o)===!1&&(r=!1),r&&u.push({id:o.id,title:o.name,checked:n===t})}}plus.io.resolveLocalFileSystemURL("_documents/__wap2app_bijia_badge",function(t){h=!1,c=!0,e&&e()},function(t){h=!0,c=!0,e&&e()})}},f=function(e){e=e===!0;var t=plus.runtime.appid,i=r();if(i&&i.__wap2app_bijia){var n=i.__wap2app_bijia;if(n&&n.url){if(e){var o=l[t];plus.storage.setItem(p,n.keyword+"");var s=plus.webview.getWebviewById(t),c=n.url.replace(/\'/g,"\\u0027");o.urlFilter&&(c=o.urlFilter(c)),s.evalJS("window.wap2app&&wap2app.open('"+c+"','','',"+!!e+");"),setTimeout(function(){var e=plus.webview.getWebviewById(plus.runtime.appid),t=e.getURL();if(t&&0===t.indexOf(o.url.replace("{{keyword}}",""))){var i=wap2app.getW2AOptions();i&&i.homeWebviewOptions&&i.homeWebviewOptions.url&&e.evalJS('window.location.href="'+i.homeWebviewOptions.url+'"')}},500)}else n.keyword&&(plus.storage.setItem(p,n.keyword+""),plus.storage.setItem(a,n.keyword+""),b());O(3,n.appid,n.appname,n.url)}}},v=function(){return plus.storage.getItem(a)},m=function(){return plus.storage.getItem(s)},_=function(){var e=plus.runtime.appid,t=l[e];if(t&&"function"==typeof t.keyword){var i=t.keyword(window.location.pathname,window.location);if(i){var o="search";n.isObject(i)&&(o=i.type,i=i.keyword),i=d(i+"")}if(i)return plus.storage.setItem(a,i+""),plus.storage.setItem(s,o),i}return!1},b=function(){if(!c)return void w(function(){b()});var e=plus.runtime.appid;v();plus.nativeUI.showMenu&&plus.nativeUI.showMenu({title:"\u540c\u6b3e\u641c",badge:h,onclick:function(){h=!1,plus.io.requestFileSystem(plus.io.PUBLIC_DOCUMENTS,function(e){e.root.getFile("__wap2app_bijia_badge",{create:!0},function(){})}),O(1)}},u,function(t){var i=v(),n=m()||"search",o=l[t.target.id];if(o.id!==e){var r="",a=o.url,s={launch_path:""};a&&(r=a.replace("{{keyword}}",encodeURIComponent(i)),o.urlFilter&&(r=o.urlFilter(r))),r&&(s.launch_path=r),plus.stream.open({appid:o.id,splash:"default",extras:{__wap2app_bijia:{appid:e,appname:"",url:r,keyword:i,type:n}},styles:s},function(){},function(e){}),O(2,o.id,o.name,r)}})},g=function(){plus.nativeUI.hideMenu&&plus.nativeUI.hideMenu()},y=function(){var e=plus.runtime.appid,t=l[e];return t&&"function"==typeof t.matchPathnames?!!t.matchPathnames(window.location.pathname,window.location):!1},O=function(e,t,i,n,r){var a={appid:plus.runtime.appid,imei:plus.storage.getItem("__DEVICE_ID")||plus.device.imei||plus.device.uuid,p:"iOS"===plus.os.name?"i":"a",os:plus.os.version,md:plus.device.model,net:plus.networkinfo.getCurrentType(),vb:plus.runtime.innerVersion,vd:plus.device.vendor,av:plus.runtime.version,url:n||"",type:e,check_appid:t||"",check_appname:i||""};o.post("https://stream.dcloud.net.cn/price/check/log",a,r)},I=function(){return l[plus.runtime.appid]};e.exports={init:w,bijia:f,support:y,showMenu:b,hideMenu:g,getConfig:I,getKeyword:v,initKeyword:_}},function(e,t){var i=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){var t={};if(e=e&&(0===e.indexOf("?")?e.replace("?",""):e))for(var i;i=n.exec(e);)t[r(i[1])]=r(i[2]);return t},r=function(e){return decodeURIComponent(e.replace(i," "))},a=function(e){var t=e||plus.runtime.arguments;if(t&&"string"==typeof t){if(~t.indexOf("//"))t=t.split("//"),t=t.length>1?t[1]:"";else if(t){try{var i=JSON.parse(t);i&&(t=i)}catch(n){}"string"==typeof t&&(t=o(t),t.arg&&(t=decodeURIComponent(t.arg)))}return"string"==typeof t&&(t=o(t)),t}return{}};e.exports=a},function(e,t,i){var n=i(6),o=i(10),r=function(e,t){e=n.extend({appid:plus.runtime.appid,p:"iOS"===plus.os.name?"i":"a",os:plus.os.version,vb:plus.runtime.innerVersion,net:plus.networkinfo.getCurrentType(),vd:plus.device.vendor,md:plus.device.model,app_version:plus.runtime.version,channel:plus.runtime.channel||"",startfrom:plus.runtime.launcher,device_info:plus.storage.getItem("__DEVICE_ID")||plus.device.imei||plus.device.uuid,user_id:"",mobile:"",order_id:"",order_title:"",order_detail:"",order_status:"",goods_count:"",order_fee:"",pay_channel:"",delivery_address:"",order_time:"",optional:""},e),o.post("https://stream.dcloud.net.cn/collect/order",e,t)};r.pay_channel={ALI_APP:"ALI_APP",ALI_WAP:"ALI_WAP",WX_APP:"WX_APP",WX_JSAPI:"WX_JSAPI",UN_APP:"UN_APP",UN_WEB:"UN_WEB",CASH:"CASH",OTHERS:"OTHERS"},r.order_status={PENDING:1,PAID:2,REFUNDED:3,END:4,CANCELED_BYBUYER:11,CANCELED_BYSELLER:12},e.exports=r},function(e,t,i){var n=i(6),o={container:"position: fixed;bottom: 65px;left:50%;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);z-index: 2147483647;opacity: 0;-webkit-transition: opacity .3s;transition: opacity .3s;line-height:17px",message:"padding: 18px 27px;font-size: 14px;color: #fff;text-align: center;background-color: #000;border-radius: 4px"},r={"long":3500,"short":2e3},a=function(e,t){t=n.extend({duration:"short"},t||{});var i=document.createElement("div");i.setAttribute("style",o.container),i.innerHTML='<div style="'+o.message+'">'+e+"</div>",i.addEventListener("webkitTransitionEnd",function(){i.parentNode.removeChild(i),i=null}),document.body.appendChild(i),i.addEventListener("click",function(){i.parentNode.removeChild(i),i=null}),i.style.opacity=.8,i.offsetHeight;var a=r["short"];return a="number"==typeof t.duration?t.duration:r[t.duration],a||(a=r["short"]),setTimeout(function(){i&&(i.style.opacity=0,i.offsetHeight)},a),{isVisible:function(){return!!i}}};e.exports=a},function(e,t,i){var n=i(6),o=i(10),r=function(e,t,i,r,a){if(n.isDev())plus.nativeUI.alert(r);else{if(a=a||1,Math.random()>a)return;var s={appid:plus.runtime.appid,app_version:plus.runtime.version,type:e||5,url:t||"",webview_id:i||"",message:r||"",p:"iOS"===plus.os.name?"i":"a",os:plus.os.version,imei:plus.storage.getItem("__DEVICE_ID")||plus.device.imei,md:plus.device.model,net:plus.networkinfo.getCurrentType(),plus_version:plus.runtime.innerVersion,w2a_version:wap2app.version};o.post("https://stream.dcloud.net.cn/wap2app/monitor",s)}};e.exports={css:function(e,t,i,n){r(1,e,t,i,n)},dom:function(e,t,i,n){r(2,e,t,i,n)},pathname:function(e,t,i,n){r(3,e,t,i,n)},sms:function(e,t,i,n){r(4,e,t,i,n)},other:function(e,t,i,n){r(5,e,t,i,n)}}},function(e,t,i){var n,o,r,a,s=i(7),p=function(){s.android&&(n=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Intent"),r=plus.android.importClass("android.provider.Settings"),a=plus.android.importClass("android.net.Uri"))};e.exports={openLocationSource:function(){n||p(),n&&n.startActivity(new o(r.ACTION_LOCATION_SOURCE_SETTINGS))},openApplicationDetail:function(){n||p(),n&&n.startActivity(new o(r.ACTION_APPLICATION_DETAILS_SETTINGS,a.parse("package:"+n.getPackageName())))},openAirPlaneModeSetting:function(){n||p(),n&&n.startActivity(new o(r.ACTION_AIRPLANE_MODE_SETTINGS))}}},function(e,t){var i=function(e,t,i,n){n=n||1;var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires="+o.toUTCString();plus.navigator.setCookie(e,t+"="+i+"; "+r)},n=function(e,t){var i=t+"=",n=plus.navigator.getCookie(e);if(n){n=n.split(";");for(var o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(i))return r.substring(i.length,r.length)}}return""},o=function(e,t){i(e,t,"",-1)};e.exports={set:i,get:n,remove:o}},function(e,t,i){var n=i(14),o="."+n.W2A_IFRAME_CLASS+"."+n.W2A_ACTIVE_CLASS,r=function(e){var t=e.id,i=e.styles||n.W2A_IFRAME_STYLES,o=e.html,r=document.getElementById(t);if(!r){r=document.createElement("iframe"),r.id=t,r.allowtransparency="true",r.setAttribute("style",i),document.body.appendChild(r);var a=r.contentWindow.document;a.designMode="on",a.open(),a.write(o),a.close(),a.designMode="off"}return r},a=function(e){return e?document.querySelector("#"+e+o):document.querySelector(o)},s=function(e){var t=document.getElementById(e);return t&&!~t.className.indexOf(n.W2A_ACTIVE_CLASS)?(t.className=n.W2A_IFRAME_CLASS+" "+n.W2A_ACTIVE_CLASS,t.style.webkitTransform="translate(0,0)",!0):!1},p=function(e){var t=a(e);return t?(t.className=n.W2A_IFRAME_CLASS,t.style.webkitTransform="translate(0,-100%)",!0):!1};e.exports={init:r,open:s,close:p,isVisible:a}},function(e,t,i){var n=i(24),o={},r=function(e){o[e.id]=e.callback;var t=n.init(e);return a(t.contentWindow.document),t},a=function(e){e.addEventListener("touchmove",function(e){e.preventDefault()}),e.addEventListener("click",function(e){for(var t=e.target;t&&t!=document;t=t.parentNode){var i=t.className;if("string"==typeof i){if(~i.indexOf("mui-confirm-inner"))break;if(~i.indexOf("mui-confirm ")){l(-2);break}if(~i.indexOf("mui-confirm-btn")){l(Array.prototype.slice.call(t.parentNode.children).indexOf(t));break}}}})},s=function(e){return n.isVisible(e)},p=function(e){return n.open(e)},l=function(e,t){var i=s(t);if(i){var r=o[i.id];if(r){var a=i.contentWindow.document.querySelector('input[type="checkbox"]');if(r({index:e,checked:a?a.checked:void 0})===!1)return!1}return n.close(t),!0}return!1};e.exports={init:r,open:p,close:l,isVisible:s}},function(e,t,i){var n=i(6),o=function(e){e=JSON.parse(e);for(var t=[],i=e.urls,n=e.w||0,o=e.h||0,r=0,a=i.length;a>r;r++)t.push({src:i[r],w:n,h:o});var s=new PhotoSwipe(document.querySelector(".pswp"),PhotoSwipeUI_Default,t,e);0!==n&&0!==o||s.listen("gettingData",function(e,t){if(!t.loading&&(t.w<1||t.h<1)){t.loading=!0;var i=new Image;i.onload=function(){t.w=this.width,t.h=this.height,s.invalidateCurrItems(),s.updateSize(!0),t.loading=!1},i.src=t.src}}),s.listen("close",function(){plus.webview.currentWebview().close("auto")}),s.init()},r="__W2A_SWIPER",a=function(e){e=n.extend({index:0,pinchToClose:!1,closeOnScroll:!1,showWaiting:{title:"",options:{modal:!1,back:"transmit",padlock:!0}}},e),e.history=!1;var t=plus.webview.getWebviewById(r);t?(t.show("fade-in",200),t.evalJS("("+Function.prototype.toString.call(o)+")('"+JSON.stringify(e)+"')")):(plus.nativeUI.showWaiting(e.showWaiting.title,e.showWaiting.options),t=plus.webview.create("_www/"+(e.url||"__wap2appswiper.html"),r,{background:"transparent",hardwareAccelerated:!0,scrollIndicator:"none"}),t.addEventListener("titleUpdate",function(){t.show("fade-in",200)}),t.addEventListener("loaded",function(){plus.nativeUI.closeWaiting(),t.evalJS("("+Function.prototype.toString.call(o)+")('"+JSON.stringify(e)+"')")}))};e.exports=a},function(e,t,i){var n=i(6),o=i(12),r=i(11),a=i(28),s=i(16),p=i(21),l=i(17),c=i(14),h=i(15),u=i(26),d=function(e){this._init(e)},w=d.prototype;w._init=function(e){this.webview=!1,this.options=e,this._initWebview(),this._initShortcut(),this._initPreviewImage()},w._initWebview=function(){var e=this.options;if(n.plusReady(function(){this.webview=plus.webview.currentWebview(),this.w2aContextWebview=plus.webview.getWebviewById(c.W2A_CONTEXT_ID);var e=this.webview.__wap2app_opener_id;this.opener=e?plus.webview.getWebviewById(e):!1,this.opener&&(document.referrer=this.opener.getURL()),this.isBrowser=this.webview.id===c.W2A_BROWSER_CHILD_ID,this._initBijia(),o.ready(function(){this._initReport(),this._handleShow(),this._handleBack(),this._handleGps(),this._handleShare(),this._handleReport()}.bind(this))}.bind(this)),e.injectStyle){var t=e.injectStyle;"function"==typeof e.injectStyle&&(t=e.injectStyle(window.location.pathname,window.location)),t&&o.ready(function(){var e=document.createElement("style");e.appendChild(document.createTextNode(t)),document.head.appendChild(e)})}if(e.injectScript)try{"function"==typeof e.injectScript&&e.injectScript()}catch(i){console.error(i)}setTimeout(function(){o.ready(function(){e.group&&e.group.activate&&setTimeout(function(){this._handleGroupActivate(e.group.activate,e.group)}.bind(this),e.group.delay||0),this.fixed(this.options.fixed)}.bind(this))}.bind(this),200)},w._initBijia=function(){if(h.bijia()&&(this.webview.id!==plus.runtime.appid||plus.runtime.arguments)){var e=this.webview.isVisible(),t=plus.webview.getTopWebview();if(!l.support()){var i=!1;return e?t&&t.id===this.webview.id&&(i=!0):i=!0,void(i&&this.w2aContextWebview&&this.w2aContextWebview.evalJS("window.wap2app&&wap2app.bijia.hideMenu();"))}var n=!1;e?t&&t.id===this.webview.id&&(n=!0):n=!0,n&&(this.w2aContextWebview&&this.w2aContextWebview.evalJS("window.wap2app&&wap2app.bijia.showMenu();"),o.ready(function(){var e=0,t=setInterval(function(){e++,l.initKeyword()?clearInterval(t):e>10&&clearInterval(t)}.bind(this),300)}.bind(this)))}},w._initReport=function(){var e=window.location.href,t=this.webview.id;this.report={dom:function(i,n){p.dom(e,t,i,n)},css:function(i,n){p.css(e,t,i,n)},pathname:function(i,n){p.pathname(e,t,i,n)},sms:function(i,n){p.sms(e,t,i,n)},other:function(i,n){p.other(e,t,i,n)}}},w._handleReport=function(){o.ready(function(){setTimeout(function(){this._checkHead()}.bind(this),3e3)}.bind(this))},w._initPreviewImage=function(){var e=this.options.previewImage;if(e){var t=e.selector;t&&window.addEventListener(e.eventType,function(i){var o=i.target;if("function"==typeof t)for(;o&&o!==document;o=o.parentNode){var r=t(i.target);if(n.isObject(r)){var a=n.extend({showWaiting:this.options.showWaiting},e.options);u(n.extend(a,{url:e.url,index:r.index,urls:r.urls,w:r.w,h:r.h})),i.stopPropagation(),i.preventDefault();break}}else if("string"==typeof t){for(var s=Array.prototype.slice.call(document.querySelectorAll(t)),p=[],l=0,c=s.length;c>l;l++)p.push(s[l].src);for(;o&&o!==document;o=o.parentNode){var h=s.indexOf(o);if(~h){var d=o.naturalWidth,w=o.naturalHeight,a=n.extend({showWaiting:this.options.showWaiting},e.options);u(n.extend(a,{url:e.url,index:h,urls:p,w:d,h:w})),i.stopPropagation(),i.preventDefault();break}}}}.bind(this),!0)}},w._initShortcut=function(){this.options.isHome&&this.webview.appendJsFile("_www/__shortcut.js")},w._handleShow=function(){if("plusready"===this.options.show.eventType){var e=n.now();if(o.ready(function(){}.bind(this)),o.detectBlank())var t=setInterval(function(){(!o.detectBlank()||n.now()-e>2e3)&&(clearInterval(t),wap2app.show({title:document.title}))}.bind(this),4);else wap2app.show({title:document.title})}},w._handleGps=function(){var e=this.options;if(e.gps.enable){var t=plus.storage.getItem(c.W2A_GPS_TIME);(!t||n.now()-parseInt(t,10)>60*e.gps.interval*1e3)&&setTimeout(function(){this._checkGps()}.bind(this),10)}},w._checkGps=function(){var e=this.options.gps;a.isEnabled(e.disabledMsg)?a.checkPermission(function(){this.webview.reload()}.bind(this),e.forbiddenMsg)&&plus.storage.setItem(c.W2A_GPS_TIME,n.now()+""):plus.storage.setItem(c.W2A_GPS_TIME,n.now()+"")},w._handleGroupReport=function(e,t,i,r){if(this.isReport()&&this.options.report["tab-changed"]&&t){for(var a=e.querySelectorAll("*"),s=[],p=wap2app.getW2AOptions(),l=0,c=a.length;c>l;l++){var h=a[l];if(o.elementMatch(h,t)){var u=h;if("A"!==h.tagName&&(u=h.querySelector("a")),u){var d="";r&&(d=u.getAttribute(r)),d||(d=u.href);var w=o.getLocation(d);if(i&&n.isMatch(w,{pathname:i}))continue;var f=p.getWebviewOptionsByUrl(d);f.group||s.push(d)}}}s.length&&this.options.report["tab-changed"]&&this.report.pathname(this.options.report["tab-changed"].replace("{url}",JSON.stringify(s)))}},w._handleGroupActivate=function(e,t){if(e&&n.isObject(e)&&e.container&&e.itemMatch&&(e.itemActiveClass||e.activate)){var i=document.querySelector(e.container);if(i){for(var r=e.activate,a=e.deactivate,s=e.itemMatch,p=e.attribute,l="",c=e.itemActiveClass||"",h=e.itemActiveClass.split(" "),u=t.report.ignore,d=0;d<h.length;d++)l+="."+h[d].replace(/\s+/g,"");var w=this;setTimeout(function(){w._handleGroupReport(i,s,u,p)},1e3),r||(r=function(e){for(var t=e;t&&t!==i;t=t.parentNode)if(o.elementMatch(t,s)){var n=t.className;n=n.replace(c,""),t.className=n+" "+c,t.offsetHeight;break}}),a||(a=function(e){for(var t=e;t&&t!==i;t=t.parentNode)if(o.elementMatch(t,s)){t.className=t.className.replace(new RegExp("\\b("+c+")\\b","g"),"").replace(/^\s+|\s+$/g,""),t.offsetHeight;break}});var f=i.querySelector(l);i.addEventListener("click",function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)if("A"===t.tagName){var i="";if(p&&(i=t.getAttribute(p)),i||(i=t.href),i){var n=o.getLocation(i);if(~["http:","https:"].indexOf(n.protocol)){i=n.href,e.preventDefault(),e.stopPropagation(),a(f),r(t);wap2app.$$group_reset=function(){setTimeout(function(){a(t),r(f)},100)};var s=function(e){setTimeout(function(){wap2app.open(e)},150)};window.requestAnimationFrame?window.requestAnimationFrame(function(){s(i)}):s(i);break}}}}.bind(this),!0)}}},w._handleShare=function(){this.options.share&&s.init()},w.fixed=function(e){n.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];if(n.isObject(i)&&i.selector){var r=document.querySelector(i.selector);if(r){var a=o.getStyles(r,"position");if("fixed"!==a){var s=i.styles;if(s)for(var p in s)s.hasOwnProperty(p)&&(r.style[p]=s[p]);r.style.position="fixed";var l=document.createElement("div");l.className="__wap2app_fixed_placeholder",l.setAttribute("style","height:"+(s.height||r.offsetHeight+"px")+";width:100%;"),r.parentNode.insertBefore(l,r)}}}}},w._handleBack=function(){this.options.back.enable&&(this._overrideHistory(),this._handleBackClick(),this.opener&&plus.storage.removeItem(c.W2A_WEBVIEW_LOADING+this.opener.id))},w._handleBackClick=function(){var e=this.options,t=e.back,i=t.selector;if(i){var n=this,o=function(e){var t=document.querySelectorAll(i);if(t&&t.length)for(var n=e.target;n&&n!==document;n=n.parentNode)for(var o=0,r=t.length;r>o;o++)if(n===t[o])return n;return!1},r=function(i){var r=o(i);r&&(r.__w2a_fastclick&&(r.__w2a_fastclick=!1,r.className=r.className.replace(" "+e.fastclick.className,"")),t.eventType===i.type&&n.back(),i.preventDefault(),i.stopPropagation())};window.addEventListener(t.eventType,r,!0),"click"!==t.eventType&&window.addEventListener("click",r,!0),e.fastclick&&window.addEventListener("touchstart",function(t){var i=o(t);i&&(i.__w2a_fastclick=!0,i.className=i.className+" "+e.fastclick.className)},!0)}},w._overrideHistory=function(){if(this.options.back.override){var e=this,t=function(t){return function(i){location.hash?t.apply(window.history,[i]):e.back()}};window.history.back=t(window.history.back),window.history.go=t(window.history.go)}},w._handleMaskClose=function(e,t,i,n,r){"string"==typeof n&&(n=[n]);for(var a=0;a<n.length;a++)wap2app.trigger(i,n[a]);return r===!1?!0:t!==o.elementFromPoint(e[0],e[1])},w.isReport=function(){return~["http:","https:"].indexOf(window.location.protocol)},w._checkHead=function(){if(!this.options.quit&&this.isReport()){var e=this.options;if(e.report["no-head"]||e.report["double-head"]||e.report["download-tips"]){var t=!1,i=!1;this.isBrowser?(t=!0,i=e.dock):e.screenshot&&e.screenshot.url&&n.isObject(e.screenshot.view)&&e.screenshot.view.enable&&(t=!0,i="dock"===e.screenshot.view.styles.position);var r=o.detectHead(e.head);r?"boolean"!=typeof r&&(t&&i&&e.report["double-head"]&&this.report.dom(e.report["double-head"]),e.report["download-tips"]&&o.detectDownloadTips(r)&&this.report.dom(e.report["download-tips"])):(t&&!i&&e.report["no-head-dock"]&&this.report.dom(e.report["no-head-dock"]),!t&&e.report["no-head"]&&this.report.dom(e.report["no-head"]))}}},w._handleMask=function(){var e=this.options.back.mask;if(e){var t=window.innerWidth-1,i=window.innerHeight-1,n=e.offset,r=n.x,a=n.y,s=[[r,a],[t-r,a],[r,i-a],[t-r,i-a]],p=e.handle;"function"!=typeof p&&(p=!1);for(var l=function(e,t){return e.getPropertyValue(t)||e[t]},c=!1,h="",u=0;4>u;u++){var d=s[u],w=o.elementFromPoint(d[0],d[1]);if(w){var f=p&&p(w);if(f){if(c=!0,"boolean"==typeof f)return!1;if("object"==typeof f)if(f.eventType&&f.element){if(this._handleMaskClose(d,w,f.element,f.eventType,!1))return!1}else if(this._handleMaskClose(d,w,f,e.eventType,!1))return!1}var v=w.offsetWidth,m=w.offsetHeight,t=window.innerWidth-2*r,i=window.innerHeight-2*a;if(v>0&&m>0&&v>=t&&m>=i){var _=o.getStyles(w),b=l(_,"opacity");if(1>b&&b>0&&(c=!0,this._handleMaskClose(d,w,w,e.eventType)))return!1;var g=o.getRGBA(l(_,"backgroundColor"));if(g){var y=parseFloat(g[3]);if(1>y&&y>0&&(c=!0,this._handleMaskClose(d,w,w,e.eventType)))return!1}c&&(h=w.id||w.className)}}}return this.isReport()&&c&&this.options.report.mask&&this.report.dom(this.options.report.mask.replace("{mask}",h)),!0}},w._handleBeforeBack=function(e){if(e&&(("function"==typeof e||n.isObject(e))&&(e=[e]),n.isArray(e)&&e.length))for(var t=0;t<e.length;t++){var i=e[t];if("function"==typeof i&&i(window.location.pathname,window.location)===!1)return!1;if(n.isObject(i))for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];"string"==typeof a&&(a={selector:a,eventType:"click"});var s=document.querySelectorAll(r);if(s&&s.length)for(var p=0;p<s.length;p++){var l=s[p];if(l&&o.isVisible(l)){var c=!1;if(c=a.selector?a.selector.substr(0,r.length)===r?l.querySelector(a.selector):document.querySelector(a.selector):l)return wap2app.trigger(c,a.eventType),!1}}}}return!0},w.open=function(e){wap2app.open(e)},w.back=function(){var e=this.options,t=e.back,i=this._handleMask();if(i!==!1&&(i=this._handleBeforeBack(t.beforeBack)),i!==!1){var o=e.show,a=o.aniShow||"pop-in",s=o.duration||300;a=~a.indexOf("in")?a.replace("in","out"):a.replace("out","in");var p=e.parent&&"browser"!==e.parent?this.webview.parent():this.webview,l=t.history,c=!0;"boolean"==typeof l?c=l:l&&(c=n.isMatch(window.location,{matchPathnames:l}));var h=!1;"function"==typeof t.handle&&(h=t.handle(p,c,e)),h===!1&&("spa"===e.mode?this.webview.canBack(function(e){e.canBack?r.back(a,s,function(e){history.back()},{showWaiting:t.showWaiting,delay:t.delay}):this.w2aContextWebview&&this.w2aContextWebview.evalJS("window.wap2app&&wap2app.back("+c+",false);")}.bind(this)):this.w2aContextWebview&&this.w2aContextWebview.evalJS("window.wap2app&&wap2app.back("+c+",false);"))}},e.exports=d},function(e,t,i){var n=i(7),o=i(22),r=["\u786e\u5b9a","\u53d6\u6d88"],a=!1;e.exports={isEnabled:function s(e,t){if("iOS"===plus.os.name)return!0;if(!a){var s=!0;try{var i=plus.android.runtimeMainActivity(),n=i.getSystemService("location"),p=plus.android.importClass(n),l=n.isProviderEnabled(p.GPS_PROVIDER);l||(s=!1)}catch(c){s=!1}return s||("function"==typeof e&&(t=e,e=""),(e||t)&&(e=e||"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd","Android"===plus.os.name&&(a=!0,plus.nativeUI.confirm(e,function(e){0===e.index?(o.openLocationSource(),t&&t()):a=!1},"\u63d0\u793a",r)))),s}},checkPermission:function(e,t,i){if("iOS"===plus.os.name)return!0;if(!a){var s=!0;try{var p=plus.android.runtimeMainActivity(),l=plus.android.importClass("android.os.Build"),c=plus.android.importClass("android.content.Context");if(l.VERSION.SDK_INT>=19){var h=p.getSystemService(c.APP_OPS_SERVICE),u=plus.android.importClass(h),d=p.getPackageManager();plus.android.importClass(d);var w=d.getPackageInfo(p.getPackageName(),0),f=plus.android.getAttribute(plus.android.getAttribute(w,"applicationInfo"),"uid"),v=p.getPackageName();"io.dcloud.streamapp"===v&&(v="com.qihoo.appstore");var m=h.checkOp(u.OPSTR_COARSE_LOCATION,f,v);if(m==u.MODE_ERRORED){var _;_=plus.android["implements"]("android.app.AppOpsManager$OnOpChangedListener",{onOpChanged:function(t,i){var n=h.checkOp(u.OPSTR_COARSE_LOCATION,f,v);t==u.OPSTR_COARSE_LOCATION&&n==u.MODE_ALLOWED&&(e&&e(),h.stopWatchingMode(_))}}),h.startWatchingMode(u.OPSTR_COARSE_LOCATION,v,_),s=!1}}}catch(b){console.log(b)}return s||("function"==typeof t&&(i=t,t=""),(t||i)&&(t=t||"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650",plus.runtime.getProperty(plus.runtime.appid,function(e){var s=e.name;n.qihoo?s="360\u624b\u673a\u52a9\u624b":n.stream&&(s="\u6d41\u5e94\u7528"),t=t.replace("{app}",s),"Android"===plus.os.name&&(a=!0,plus.nativeUI.confirm(t,function(e){0===e.index?(o.openApplicationDetail(),i&&i()):a=!1},"\u63d0\u793a",r))}))),s}}}},function(e,t,i){var n=i(6),o=i(7),r=i(9),a=i(12),s=i(30),p=i(11),l=i(31),c=i(18),h=i(17),u=i(14),d=i(15),w=i(32),f={},v=u.SCREENSHOT_PATH,m=function(e){this.options=e.globalOptions,this.w2aOptions=e,this.loading=!1,this.backing=!1,this.nativeObjViews={},this.nativeObjBitmaps={},this.appName="",this._init()},_=m.prototype;_._init=function(){this._initInfo(),this._initStack(),this._initEvent(),this._initSmsListener(),this._initScreenshots(),this._initArgs(),this._initBijia(),this._initLog()},_._initLog=function(){var e=0;document.addEventListener("pause",function(t){e=n.now()}),document.addEventListener("resume",function(t){var i=n.now()-e;i>6e4?r.resume(parseInt(i/1e3)+""):console.log("W2A[context]:60\u79d2\u5185\u65e0\u9700\u4e0a\u62a5resume\u65e5\u5fd7")})},_._initInfo=function(){var e=u.W2A_APP_NAME+"_"+plus.runtime.version;this.appName=plus.storage.getItem(e),this.appName||plus.runtime.getProperty(plus.runtime.appid,function(t){this.appName=t.name,plus.storage.setItem(e,this.appName)}.bind(this))},_._initArgs=function(){var e=c();e&&e.url&&wap2app.open(e.url,"",plus.runtime.appid)},_._initBijia=function(){d.bijia()&&(h.bijia(),h.init(function(){}))},_._addContext=function(e){f[e.id]=e},_.removeContext=function(e,t){if(e===plus.runtime.appid)return!1;var i=f[e];if(i&&(i.clear(),delete f[e],t!==!1&&i.options.group))for(var n=i.webview.__wap2app_group.split(u.W2A_GROUP_SPLIT),o=0,r=n.length;r>o;o++)this.removeContext(n[o],!1)},_.getContext=function(e){return f[e]},_.getContexts=function(){return f},_.currentContext=function(){for(var e=plus.webview.all(),t=e.length-1;t>=0;t--){var i=e[t];if("normal"===i.__wap2app_type||"home"===i.__wap2app_type||i.id===plus.runtime.appid){var n=f[i.id];return n||i}}return!1},_.size=function(){var e=0;for(var t in f)++e;return e},_.clearContext=function(){for(var e in f)e!==plus.runtime.appid&&this.removeContext(e)},_._initStack=function(){var e=this.w2aOptions.homeWebviewOptions;this._addContext(new w(this,e.url,e,void 0,!0)),this._preloadWebviewContext(e)},_._initEvent=function(){document.addEventListener("foreground",function(e){this.restoreWebview(),this._initArgs(),e&&"stream"===e.active&&d.bijia()&&h.bijia(!0)}.bind(this)),plus.key.addEventListener("backbutton",function(){this.back(!0,!0)}.bind(this)),d.restore()&&document.addEventListener("trimmemory",function(){this.clearWebviews()}.bind(this))},_._initSmsListener=function(e){var t=this.options.sms;if("function"==typeof t)setTimeout(function(){s.register(function(e){for(var i=0,n=e.length;n>i&&!t(e[i].getDisplayMessageBody());i++);})},100);else if(n.isObject(t)){var i=t.callback;if(n.isObject(t.callback)&&t.callback.webviewId){var o=t.callback.handle,r=t.callback.webviewId;"function"==typeof r&&(r=r()),"string"==typeof r&&(r=[r]),n.isArray(r)&&r.length&&(i=function(e){for(var t=0;t<r.length;t++){var i=plus.webview.getWebviewById(r[t]);if(i){i.evalJS("("+Function.prototype.toString.call(o)+")("+e+")");break}}})}if("function"==typeof i){var a=t.match;setTimeout(function(){s.register(function(e){for(var t=0,n=e.length;n>t;t++){var o=e[t].getDisplayMessageBody();if(~o.indexOf(a.sign)){var r=new RegExp("([0-9]{"+a.length+"})"),s=o.match(r);if(s&&2===s.length){i(s[1]);break}}}})},100)}}},_._initScreenshots=function(){var e=this;v=v+plus.runtime.appid+"/";var t=e.w2aOptions.webviewsOptions,i=[],o={};
for(var r in t){var a=t[r].screenshot;if(a&&a.url){var s=a.url;"string"==typeof s&&(s=[s]);for(var p=a.view&&a.view.crop.src,c=0;c<s.length;c++){var h=s[c];o.hasOwnProperty(h)?p&&(i[o[h]].clip=p):(o[h]=c,i.push({url:h,clip:p}))}}}o=null,setTimeout(function(){if(d.nativeObj()){var t=[];e._initNativeObjView();var o="0.0.2",r=plus.storage.getItem(u.W2A_SCREENSHOT_VERSION)===o;r||plus.storage.setItem(u.W2A_SCREENSHOT_VERSION,o),l(i,function(i,n){r?d.bitmapRecycle()?e._initDrawScreenshotsByIO(t,i,n):e._initDrawScreenshots(t,i,n):(t.push(i),n())},function(){if(t.length){e.currentScreenshot=!1;var i=e._initScreenshotWebview();l(t,function(t,o){e.currentScreenshot={id:t.url,clip:t.clip,callback:o,start:n.now()},i.loadURL("_www/"+t.url)},function(){i.close()})}})}},100)},_._initNativeObjView=function(){var e={},t=new plus.nativeObj.View(u.W2A_VIEW_ID,e);t.show(),t.hide(),"function"==typeof t.addEventListener&&t.addEventListener("click",function(e){var t=e.pageX,i=e.pageY;60>=t&&60>=i&&wap2app.getContext().back()}),"function"==typeof t.interceptTouchEvent&&t.interceptTouchEvent(!0),this.nativeObjViews[t.id]=t;var i=new plus.nativeObj.View(u.W2A_OTHER_VIEW_ID,e);i.show(),i.hide(),"function"==typeof i.interceptTouchEvent&&i.interceptTouchEvent(!0),this.nativeObjViews[i.id]=i,this.nativeObjBitmaps[u.W2A_BITMAP_ID]=new plus.nativeObj.Bitmap(u.W2A_BITMAP_ID),this.nativeObjBitmaps[u.W2A_OTHER_BITMAP_ID]=new plus.nativeObj.Bitmap(u.W2A_OTHER_BITMAP_ID)},_._initDrawScreenshotsByIO=function(e,t,i){var n=v+encodeURIComponent(t.url)+".png";plus.io.resolveLocalFileSystemURL(n,function(o){new plus.nativeObj.Bitmap(t.url,n),t.clip?(n=v+encodeURIComponent(t.url+"_header")+".png",plus.io.resolveLocalFileSystemURL(n,function(e){new plus.nativeObj.Bitmap(t.url+"_header",n),i()},function(n){e.push(t),i()})):i()},function(n){e.push(t),i()})},_._initDrawScreenshots=function(e,t,i){var n=new plus.nativeObj.Bitmap(t.url);n.load(v+encodeURIComponent(t.url)+".png",function(){i()},function(o){n.clear(),n=null,e.push(t),i()})},_._initScreenshotWebview=function(){var e=this,t=plus.webview.getWebviewById(u.W2A_SCREENSHOT_WEBVIEW_ID);if(!t)if(o.ios)t=plus.webview.create("",u.W2A_SCREENSHOT_WEBVIEW_ID,{zindex:-1,scrollIndicator:"none"},{__wap2app_type:"screenshot"}),t.show("none");else{var i={};d.titlebar()&&(i.height=plus.screen.resolutionHeight-plus.navigator.getStatusbarHeight()+"px"),t=plus.webview.create("",u.W2A_SCREENSHOT_WEBVIEW_ID,i,{__wap2app_type:"screenshot"})}var n=e._drawScreenshot(t);return t.addEventListener("loaded",function(){setTimeout(function(){n()},100)}),t},_._drawScreenshot=function(e){var t=this;return function(){var i=t.currentScreenshot;if(i){var o=i.id,r=i.clip,a=i.callback,s=i.start;if("file:///android_asset/data/error.html"===e.getURL())return void a();var p=new plus.nativeObj.Bitmap(o);e.draw(p,function(){p.save(v+encodeURIComponent(o)+".png",{overwrite:!0},function(){d.bitmapRecycle()?r?(s=n.now(),p.save(v+encodeURIComponent(o+"_header")+".png",{clip:r,overwrite:!0},function(){new plus.nativeObj.Bitmap(o+"_header",v+encodeURIComponent(o+"_header")+".png"),p.recycle&&p.recycle(),a()},function(){p.recycle&&p.recycle(),a()})):(p.recycle&&p.recycle(),a()):a()},function(e){p.clear(),p=null,a()})},function(e){p.clear(),p=null,a()})}}},_._initBrowser=function(){this.getBrowser()},_.getBrowser=function(e,t){var i=this,o=e&&a.getLocation(e)||{},r=plus.webview.getWebviewById(u.W2A_BROWSER_ID);if(!r||t){var s=this.w2aOptions.globalOptions.browser,p=s.url;"function"==typeof p&&(p=p(o.pathname,o)),p||(p="__wap2appbrowser.html"),r=plus.webview.create("_www/"+p,u.W2A_BROWSER_ID,this._getBrowserStyles(o),{__wap2app_type:"parent",__wap2app_parent_type:"browser"});var l=function(){var e=[],t=n.extend(i.options.browser);if("__wap2appbrowser.html"===p){var o=i.options.browser.styles;for(var a in o)if(o.hasOwnProperty(a)){var s=[],c=o[a];for(var h in c)s.push(h+":"+c[h]+";");e.push(a+"{"+s.join("")+"}")}}t.styles=e.join(""),r.evalJS("wap2app_browser.init('"+JSON.stringify(t)+"')"),r.removeEventListener("loaded",l)};r.addEventListener("loaded",l)}else r.setStyle(this._getBrowserStyles(o));return r},_._getBrowserStyles=function(e){var t=this.w2aOptions.globalOptions.browser,i={hardwareAccelerated:!0,popGesture:"hide",height:parseInt(t.header.height,10)+1},n=t.dock;return"function"==typeof n&&(n=n(e.pathname||"",e)),n?(i.position="dock",i.dock="top"):(i.position="absolute",i.dock=""),i},_._openBySpa=function(e,t,i){p.open(t,e.id,"replace"===i)},_._openBySelf=function(e,t,i,n,o){e.overrideUrlLoading({mode:"allow",match:u.W2A_OVERRIDE_MATCH}),setTimeout(function(){"reload"===n?e.evalJS("window.location.reload();"):o?this._openBySpa(e,t,n):"replace"===n?e.evalJS('window.location.replace("'+t+'");'):e.evalJS('window.location.href = "'+t+'";');var i=this.getContext(e.id);i&&i.handleOverrideUrlLoadingReject()}.bind(this),50)},_._openByScheme=function(e,t){e.overrideUrlLoading({mode:"allow",match:u.W2A_OVERRIDE_MATCH}),setTimeout(function(){e.evalJS('window.location.href="'+t+'";');var i=this.getContext(e.id);i&&i.handleOverrideUrlLoadingReject()}.bind(this),50)},_._openByBlank=function(e,t,i,o,r){var s=this;if(r="undefined"==typeof r?!0:r,i=i||"",!s.loading||t===s.w2aOptions.homeWebviewOptions.url||n.isObject(i)){var p=function(){t=a.getLocation(t).href;var p=s.w2aOptions.getWebviewOptionsByUrl(t);p.url=t,"string"==typeof i&&(p.title=i),n.isObject(i)&&(p.params=i),setTimeout(function(){s.loading=!1},p.group?0:1500),p.quit&&(p.isHome&&"about:blank"===e.getURL()||s.clear()),s._addContext(new w(s,t,p,e.id,!1,o,r)),s._preloadWebviewContext(p)};s.loading=!0,window.innerHeight+100<plus.display.resolutionHeight?(document.activeElement.blur(),setTimeout(function(){p()},300)):p()}},_._preloadWebviewContext=function(e){if(e.preload){var t=e.preload;"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){var n=wap2app.getW2AOptions().getWebviewOptionsById(t[i]);n.extras.__wap2app_preload=!0,new w(this,n.url,n,e.id,!0)}}},_.open=function(e,t,i,n,o,r,s){e=e||"blank",o=o||"href",r=r!==!1;var p=a.getLocation(i);if("self"===e){if(!~["http:","https:","file:"].indexOf(p.protocol))return void this._openByScheme(t,i);this._openBySelf(t,i,n,o,r)}else"blank"===e&&this._openByBlank(t,i,n,s,r)},_._back=function(e,t){var i=this.currentContext();i&&(i instanceof w?i.back(e,t):i instanceof plus.webview.Webview&&i.id!==plus.runtime.appid&&i.close("auto"))},_.restoreWebview=function(){this.restoreTimer&&(window.clearTimeout(this.restoreTimer),this.restoreTimer=!1),this.restoreTimer=setTimeout(function(){var e=!0;if(plus.runtime.isBackground&&plus.runtime.isBackground()&&(e=!1),e){var t=plus.webview.all();if(t.length>3)for(var i=t.length-1;i>=0;i--){var n=t[i],o=n.getURL();if(!o&&n.__wap2app_url){var r=this.getContext(n.id);r&&r.loadURL(n.__wap2app_url);break}}}}.bind(this),300)},_.clearWebviews=function(){this.restoreTimer&&(window.clearTimeout(this.restoreTimer),this.restoreTimer=!1),this.restoreTimer=setTimeout(function(){var e=!0;if(plus.runtime.isBackground&&!plus.runtime.isBackground()&&(e=!1),e)for(var t=plus.webview.all(),i=!0,n=t.length-1;n>=0;n--){var o=t[n];o.__wap2app_url&&"normal"===o.__wap2app_type&&o.id!==plus.runtime.appid&&(i?i=!1:o.clear())}}.bind(this),500)};var b=!1;_.back=function(e,t){if(t!==!1){var i=n.now(),o=!1,r=this.currentContext();if(r instanceof w?r.options.quit&&(o=!0):r instanceof plus.webview.Webview&&r.id===plus.runtime.appid&&(o=!0),!o&&b&&1e3>i-b&&this.size()>1)return void this.close();b=i}this._back(e,t)},_.close=function(){var e=this.currentContext();e&&e.close()},_.show=function(e){var t=this.currentContext();t&&t.show(e)},_.quit=function(){if(this.size()){var e=this.currentContext();e&&e instanceof w?e.quit():this.getContext(plus.runtime.appid).quit()}},_.getWebviewContextById=function(e){return this.getContext(e)},_.clear=function(){this.clearContext(),setTimeout(function(){for(var e=plus.webview.all(),t=0,i=e.length;i>t;t++){var n=e[t];if("normal"===n.__wap2app_type&&!n.__wap2app_preload&&n.id!==plus.runtime.appid){var o=n.parent();o?o.close("none"):n.close("none")}}},20)},_.getViewById=function(e){var t=this.nativeObjViews[e];return t||(t=plus.nativeObj.View.getViewById(e),this.nativeObjViews[e]=t),t},_.getBitmapById=function(e){var t=this.nativeObjBitmaps[e];return t||(t=plus.nativeObj.Bitmap.getBitmapById(e),this.nativeObjBitmaps[e]=t),t},e.exports=m},function(e,t,i){var n,o,r,a=i(6).plusReady,s=[],p=!1,l=!1,c=!1,h=function(e){if("Android"===plus.os.name)try{var t=plus.runtime.innerVersion.split(".");c=parseInt(t[t.length-1])<22298,r=plus.android.runtimeMainActivity(),plus.android.importClass("android.content.Intent");var i=plus.android.importClass("android.content.IntentFilter"),a=plus.android.importClass("android.telephony.SmsMessage"),p="io.dcloud.feature.internal.reflect.BroadcastReceiver";c&&(p="io.dcloud.feature.internal.a.a"),o=new i;var l=function(e,t){try{var i=t.getAction();if("android.provider.Telephony.SMS_RECEIVED"==i){for(var n=t.getSerializableExtra("pdus"),o=[],r=0,p=n.length;p>r;r++)o.push(a.createFromPdu(n[r]));for(var r=0,p=s.length;p>r;r++)s[r](o)}}catch(l){}};n=plus.android["implements"](p,{a:l,onReceive:l}),o.addAction("android.provider.Telephony.SMS_RECEIVED"),e&&e()}catch(h){}},u=function(e){if(s.push(e),p){if(!l)try{c?r.a(n,o):r.registerReceiver(n,o)}catch(t){}}else p=l=!0,a(function(){h(function(){setTimeout(function(){try{c?r.a(n,o):r.registerReceiver(n,o)}catch(e){}},300)})})},d=function(e,t){for(var i=0,o=s.length;o>i;i++)s[i]===e&&s.splice(i,1);if(t&&!s.length&&r&&l){try{c?r.a(n):r.unregisterReceiver(n)}catch(a){}l=!1}};e.exports={register:u,unregister:d}},function(e,t){e.exports=function(e,t,i){var n=function(o,r){return o.length<1?i&&i():void t(o.shift(),function(){n(e,r)})};n(e,t)}},function(e,t,i){var n=i(6),o=i(7),r=i(12),a=i(11),s=i(22),p=i(23),l=i(14),c=i(15),h=i(13),u=function(e,t,i,n,o,r,a){i||(i=t,t=!1),this._init(e,i,r,a),this._create(n,o,a)},d=u.prototype;d._init=function(e,t,i,o){this.w2aContext=e,this.id=t.id,this.uuid=n.now(),this.opener=!1,this.webview=!1,this.relatedView=!1,this.nativeView=!1,this.titleUpdateTimer=!1,this.canTitleUpdateTimer=!1,this.backing=!1,this.showing=!1,this.shown=!1,this.loaded=!1,this.cleared=!1,this.animate=o!==!1,this.animating=!1,this.canTitleUpdate=!1,this.history=[],this.options=t,this.callback=i,this.redirect_url=!1},d._create=function(e,t,i){n.plusReady(function(){this._hasNetwork(e,t)&&this._createWebview(e,t,i)}.bind(this))},d._createWebview=function(e,t,i){var o=this.options;this.opener=e&&plus.webview.getWebviewById(e),this.webview=plus.webview.getWebviewById(o.id),o.id===plus.runtime.appid&&(this.shown=!0);var a=!1;if(!this.opener||this.opener.id!==o.id){var s=this.opener&&this.opener.__wap2app_group,p=o.extras.__wap2app_group;if(!s&&this.opener){var c=this.w2aContext.w2aOptions.homeWebviewOptions;this.opener.id===plus.runtime.appid&&(s=c.extras.__wap2app_group)}p&&p===s&&(a=!0)}var h=!1;if(!this.webview||this.webview.id===plus.runtime.appid||a||o.extras.__wap2app_group||(this.webview.id!==e&&(this.webview.close("none"),h=!0),this.webview=null),this.webview){if(this.webview&&this.webview.setFixBottom&&this.options.fixBottom&&this.webview.setFixBottom(this.options.fixBottom),this.webview.__wap2app_preload,o.isHome&&(this.canTitleUpdate=!0),!o.isHome&&this.webview.__wap2app_event||this._initPlusWebview(),t)return this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),void(this.loadedTimer&&clearTimeout(this.titleUpdateTimer));var u=!!this.webview.__wap2app_group||!!o.group;if(o.url){this._initOverrideResourceRequest();var d=!1;"boolean"!=typeof o.reload?d=n.isMatch(r.getLocation(o.url),{matchPathnames:o.reload},[this.webview]):o.reload&&(d=!0),d||(d=!!this.webview.__wap2app_preload),d||(d=!!o.params&&o.params.reload);var w=!1;if(d||this.webview.id!==plus.runtime.appid||"about:blank"!==this.webview.getURL()||(w=!0,d=!0),d?(o.id===e||this._isBrowserWebview()||u||this._createScreenShot(i),this.webview.overrideUrlLoading({mode:"allow",match:l.W2A_OVERRIDE_MATCH}),setTimeout(function(){this.webview.evalJS('window.location.replace("'+o.url+'")'),setTimeout(function(){this.handleOverrideUrlLoadingReject()}.bind(this),w?100:0)}.bind(this),50)):(this.loaded=!0,this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.loadedTimer&&clearTimeout(this.titleUpdateTimer),setTimeout(function(){plus.nativeUI.closeWaiting()},30)),w)return;if(this.webview.__wap2app_preload)this.webview.setStyle({zindex:0}),this._createAppend();else{var f="none",v=0,m=o.parent&&"browser"!==o.parent?this.webview.parent():this.webview;m||(m=this.webview),"browser"===m.__wap2app_parent_type&&this.webview.clear(),m.hide("none"),setTimeout(function(){m.show(f,v,function(){this.opener&&this.opener.evalJS("wap2app&&wap2app.$$group_reset&&wap2app.$$group_reset()"),plus.nativeUI.closeWaiting(),this.callback&&this.callback("shown",this.webview)}.bind(this))}.bind(this),50)}}}else{if(o.showBehind=o.params&&o.params.showBehind||!1,o.showBehind||(a&&!this.nativeView&&this._createNativeView(),this.opener.id===o.id||a||("browser"!==o.parent&&(t||this._createScreenShot(i)),t||this._createAppend(h))),o.extras.__wap2app_opener_id=e,o.extras.__wap2app_event=!t,o.extras.__wap2app_url=o.url,o.extras.__wap2app_preload&&(o.styles.zindex=-1),o.styles.errorPage&&0===o.styles.errorPage.indexOf("_www")&&(o.styles.errorPage=plus.io.convertLocalFileSystemURL(o.styles.errorPage)),this.webview=plus.webview.create(o.url,o.id,o.styles,o.extras),o.injectStyle&&this.webview.setCssText){var _=o.injectStyle;if("function"==typeof o.injectStyle){var b=r.getLocation(o.url);_=o.injectStyle(b.pathname,b)}_&&this.webview.setCssText(_)}t||this._prepareLoading(),o.listenResourceLoading&&o.listenResourceLoading.match&&this._listenResourceLoading(),this._initOverrideResourceRequest(),o.blockNetworkImage&&this.webview.setBlockNetworkImage(!0),this.webview.overrideUrlLoading({mode:"allow",match:l.W2A_OVERRIDE_MATCH},function(e){}.bind(this)),a&&!t?this._createGroupScreenshot():s&&setTimeout(function(){this._clearGroup(s)}.bind(this),500),this._isBrowserWebview()?(this.webview.append(this.relatedView),this.webview.show(o.show.aniShow,o.show.duration,function(){}.bind(this))):this._hasParentWebview()&&(this.webview.hide(),this.relatedView.append(this.webview)),this._hasNativeView()&&this.webview.append(this.nativeView.view),t||this._initPlusWebview(),this.webview&&this.webview.setFixBottom&&this.options.fixBottom&&this.webview.setFixBottom(this.options.fixBottom)}},d.loadURL=function(e){this.webview.overrideUrlLoading({mode:"allow",match:l.W2A_OVERRIDE_MATCH}),setTimeout(function(){this.webview.loadURL(e),setTimeout(function(){this.handleOverrideUrlLoadingReject()}.bind(this),1e3)}.bind(this),50)},d._clearGroupByLimit=function(e,t){if(t){for(var i=e.split(l.W2A_GROUP_SPLIT),n=plus.webview.all(),o=[],r=n.length-1;r>=0;r--){var a=n[r],s=a.id;~i.indexOf(s)&&o.push(s)}for(var p=o.splice(t),r=0;r<p.length;r++){var s=p[r];s!==plus.runtime.appid&&plus.webview.close(p[r],"none")}}},d._clearGroup=function(e){for(var t=e.split(l.W2A_GROUP_SPLIT),i=0,n=t.length;n>i;i++){var o=t[i];this.opener.id!==o&&o!==plus.runtime.appid&&plus.webview.close(o,"none")}},d._listenResourceLoading=function(){"function"==typeof this.webview.listenResourceLoading&&this.webview.listenResourceLoading({match:this.options.listenResourceLoading.match},function(e){}.bind(this))},d._initOverrideResourceRequest=function(){if("function"==typeof this.webview.overrideResourceRequest){var e=this.options.overrideResourceRequest;n.isObject(e)&&(e=[e]),e&&e.length&&this.webview.overrideResourceRequest(e)}},d._initPlusWebview=function(){var e=this.options;if(!e.isHome){this.webview.appendJsFile("_www/__wap2app.js"),this.webview.appendJsFile("_www/__wap2appconfig.js");var t=e.appendJsFile;if("string"==typeof t&&t&&(t=[t]),n.isArray(t))for(var i=0,o=t.length;o>i;i++)t[i]&&this.webview.appendJsFile("_www/"+t[i])}if(this._handleEvent(),this.handleOverrideUrlLoadingReject(),e.pullToRefresh&&e.pullToRefresh.support){var r=e.pullToRefresh.callback;this.webview.setPullToRefresh(e.pullToRefresh,function(){r?r(this.webview):(this.webview.endPullToRefresh(),this.webview.reload())}.bind(this))}},d._hasNativeView=function(){return!!this.nativeView},d._hasParentWebview=function(){return this.relatedView&&"parent"===this.relatedView.__wap2app_type},d._hasScreenshot=function(){return this.relatedView&&"screenshot"===this.relatedView.__wap2app_type},d._isBrowserWebview=function(){return this._hasParentWebview()&&"browser"===this.relatedView.__wap2app_parent_type},d._createGroupScreenshot=function(){var e=this,t=function(){e.opener&&e.opener.evalJS("wap2app&&wap2app.$$group_reset&&wap2app.$$group_reset()")};if(c.nativeObj()){var i=this.options.group,n=plus.nativeObj.Bitmap.getBitmapById(l.W2A_BITMAP_ID);n?(this.relatedView=new h(n.id,this.opener,i),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="group",this.relatedView.show("none",0,function(e){e?this.animating=!0:this.relatedView=!1,t()}.bind(this))):t()}else t()},d._createScreenShot=function(e){var t=this.options.show,i=this.options.screenshot,o=!0;if(i&&i.url){var r=this._getScreenshot();r&&(o=!1,c.nativeObj()?(!this.nativeView&&this._createNativeView(),this._drawTexts&&(i=n.extend(i,{drawText:this._drawTexts})),this.relatedView=new h(r,this.opener,i),this.relatedView.__wap2app_type="screenshot",this.nativeViewBitmap&&"_header"!==this.nativeViewBitmap.id.substr(-7)&&this.relatedView.setRecycle(!1),this.relatedView.show(e===!1?"none":t.aniShow,t.duration,function(e){e?this.animating=!0:this.relatedView=!1}.bind(this),function(){this.canTitleUpdate=!0,"startAnimation"===t.eventType&&this._titleUpdate()}.bind(this))):(this.relatedView=!1,this._createScreenShotFallback(r,this.options.show)))}o&&(this.canTitleUpdate=!0)},d._getScreenshot=function(){if("function"==typeof this.options.screenshot.handle){var e=r.getLocation(this.options.url);return this.options.screenshot.handle(e.pathname,e)}return this.options.screenshot.url},d._createNativeView=function(){var e=this.options.screenshot;if(e&&e.view&&e.view.enable){var t=this._getScreenshot(),i=!1;if(c.bitmapRecycle()&&(i=plus.nativeObj.Bitmap.getBitmapById(t+"_header")),i||(i=plus.nativeObj.Bitmap.getBitmapById(t)),i){this.nativeViewBitmap=i;var n=e.view,o=this.options.id+"_nativeView";this.nativeView=new h(o,n.styles,!1,e);var r=this.nativeView.view;"dock"===n.styles.position?"function"==typeof r.interceptTouchEvent&&r.interceptTouchEvent(!0):n.interceptTouchEvent&&"function"==typeof r.interceptTouchEvent&&r.interceptTouchEvent(!0),r.drawBitmap(i,n.crop.src,n.crop.dest),this._drawTexts=this.nativeView.drawTexts(r,e.drawText),("dock"===n.styles.position||n.interceptTouchEvent)&&this._handleNativeView(r)}}},d._handleNativeView=function(e){var t=this.options.screenshot.view;if(e&&"function"==typeof e.addEventListener){var i=t.click;i&&e.addEventListener("click",function(e){for(var t in i)if(i.hasOwnProperty(t)){var o=i[t];if(n.isCross(e.pageX,e.pageY,o.rect)){o.handle();break}}}.bind(this))}},d._createScreenShotFallback=function(e,t){this.relatedView||(this.relatedView=plus.webview.getWebviewById(e),this.relatedView?this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this)):(this.relatedView=plus.webview.create("_www/"+e,e,null,{__wap2app_type:"screenshot"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this))}.bind(this))))},d._showW2AViewFallback=function(){if(this.canTitleUpdate=!0,c.nativeObj()){var e=this.relatedView;this._createScreenshotAnimation(function(t){t&&e.hide("none")}.bind(this))}},d._createAppend=function(e){var t=this.options.show,i=this.options.parent;return i&&(this.canTitleUpdate=!0,"browser"===i?(this.relatedView=this.w2aContext.getBrowser(this.options.url,e),this.relatedView.evalJS("wap2app_browser.loading();")):(this.relatedView=plus.webview.create("_www/"+i,this.options.id+"___wap2app_parent",{popGesture:"close",hardwareAccelerated:!0},{__wap2app_type:"parent"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(t.aniShow,t.duration)}.bind(this)))),this.relatedView},d._checkNetwork=function(){var e=plus.networkinfo.getCurrentType();e===plus.networkinfo.CONNECTION_CELL2G&&(this.options.show.eventType="rendering")},d._hasNetwork=function(e,t){var i=this.options.network;return i!==!1&&plus.networkinfo.getCurrentType()===plus.networkinfo.CONNECTION_NONE?(plus.nativeUI.confirm("\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e",function(i){2===i.index?s.openAirPlaneModeSetting():1===i.index?this._create(e,t):0===i.index&&plus.runtime.quit()}.bind(this),"\u63d0\u793a",["\u9000\u51fa","\u91cd\u8bd5","\u8bbe\u7f6e\u7f51\u7edc"]),!1):!0},d._handleEvent=function(){var e=this;if(this.__loading=function(t){e._loading(t)},this.__titleUpdate=function(t){e._titleUpdate(t)},this.__loaded=function(t){e._loaded(t)},this.__rendering=function(t){e._clearAnimation("rendering")},this.options.events.loading&&this.webview.addEventListener("loading",this.__loading),this._checkNetwork(),this.options.events.titleUpdate){var t=!1;"plusready"!==this.options.show.eventType&&(this.titleUpdateTimer=setTimeout(function(){this._titleUpdate()}.bind(this),this.options.show.eventTimeout||2e3),"rendering"===this.options.show.eventType&&(n.getRuntimeInnerVersion()<26e3||o.ios?this.options.show.eventType="titleUpdate":t=!0),this.webview.addEventListener("startAnimation"===this.options.show.eventType?"titleUpdate":this.options.show.eventType,this.__titleUpdate)),this.webview.addEventListener("titleUpdate",function(){t&&setTimeout(function(){this.__titleUpdate()}.bind(this),3e3)}.bind(this))}this.options.events.loaded&&(this.loadedTimer=setTimeout(function(){this._loaded()}.bind(this),5e3),this.webview.addEventListener("loaded",this.__loaded)),this.options.screenshot&&"rendering"===this.options.screenshot.animation.clear.eventType&&(n.getRuntimeInnerVersion()>=26e3&&o.android?(this.webview.addEventListener("rendering",this.__rendering),setTimeout(function(){this.__rendering({type:"rendering.timeout"})}.bind(this),6e3)):this.options.screenshot.animation.clear.eventType="loaded")},d._prepareLoading=function(){this.showing=!0;var e=this.options.showWaiting;e!==!1&&!this.backing&&this.webview&&this.webview.id!==l.W2A_BROWSER_CHILD_ID&&setTimeout(function(){plus.nativeUI.showWaiting(e.title,e.options)},20)},d._loading=function(e){this.backing=!1,this._prepareLoading(),"function"==typeof this.options.loading&&this.options.loading(this.webview,this.backing),this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loading();")},d._createScreenshotAnimation=function(e){var t=this.options.screenshot,i=plus.nativeObj.Bitmap.getBitmapById(this._getScreenshot());if(i){var n=this.relatedView;this.relatedView=new h(i.id,null,t),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="fallback",this.relatedView.show("none",0,function(t){t||(this.relatedView=n),e&&e(t)}.bind(this))}else e&&e(!1)},d.show=function(e){this._titleUpdate(e)},d._titleUpdate=function(e){if(this.webview&&!this.backing){var t=e&&e.title||this.webview.getTitle()||"";if("null"===t&&(t=""),!t||"http"!==t.substr(0,4)&&"data"!==t.substr(0,4)||(t=""),this._isBrowserWebview())this.relatedView.evalJS("wap2app_browser.setTitle('"+encodeURIComponent(t||"")+"');");else if(this.relatedView&&this.relatedView instanceof h&&this.options.screenshot.title&&this.options.screenshot.title.enable&&!this.relatedView.drewTexts){var i=this.options.screenshot.title.filter;"function"==typeof i&&(t=i(t)),t&&(this.relatedView.setTitle(t,this.webview),this.nativeView&&this.nativeView.setTitle(t,this.webview))}var n=this.options,o=n.show;this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.titleUpdateTimer=!1;var r=function(){if(this.showing){this.showing=!1;var e=this.relatedView||!this.animate?"none":o.aniShow,t=this.relatedView||!this.animate?0:o.duration;this._show(e,t)}};n.delay?setTimeout(function(){r.call(this)}.bind(this),n.delay):r.call(this)}},d._show=function(e,t){if(!this.backing){if(this.shown)return void plus.nativeUI.closeWaiting();var i=this.options;this.shown=!0,i.showBehind&&!i.showBehind.isFirst&&this.opener?(this.webview.showBehind(this.opener),plus.nativeUI.closeWaiting(),this.callback&&this.callback("shown",this.webview)):this.webview.show(e,t,function(){if(this._handleShowBehindByOpen(),this._handleRedirectUrlByCookie(),this.relatedView)if(this.relatedView instanceof h)if("group"===this.relatedView.__wap2app_animate){var e=i.group.animation;this.relatedView.close(e.type,e.duration,function(){this.nativeObjAnimated=!0,"titleUpdate"===i.screenshot.animation.clear.eventType&&this._clearAnimation("titleUpdate"),plus.nativeUI.closeWaiting()}.bind(this))}else{var e=i.screenshot.animation;this.relatedView.close(e.type,e.duration,function(){this.nativeObjAnimated=!0,"titleUpdate"===i.screenshot.animation.clear.eventType&&this._clearAnimation("titleUpdate"),plus.nativeUI.closeWaiting()}.bind(this))}else this._hasScreenshot()?setTimeout(function(){this.relatedView.hide("none"),plus.nativeUI.closeWaiting()}.bind(this),200):plus.nativeUI.closeWaiting();else plus.nativeUI.closeWaiting();this.callback&&this.callback("shown",this.webview),i.blockNetworkImage&&"show"===i.blockNetworkImage&&this.webview.setBlockNetworkImage(!1)}.bind(this))}},d._handleShowBehindByOpen=function(){},d._handleShowBehindByBack=function(){},d._handleRedirectUrlByCookie=function(){if(this.options.isRedirect){var e=this.options.overrideUrlLoading.redirect.paramName;n.isObject(e)&&e.cookie&&e.cookie.url&&(this.redirect_url=p.get(e.cookie.url,e.cookie.name),this.redirect_url&&(this.redirect_url=decodeURIComponent(this.redirect_url)))}},d._loaded=function(e){if(!this.backing){if(this.loaded)return void setTimeout(function(){plus.nativeUI.closeWaiting()},100);this.loadedTimer&&clearTimeout(this.loadedTimer),this.loadedTimer=!1,this.loaded=!0;var t=this.options;"function"==typeof t.loaded&&t.loaded(this.webview,this.backing),t.screenshot&&"loaded"===t.screenshot.animation.clear.eventType&&this._clearAnimation("loaded"),this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loaded();"),!this.options.blockNetworkImage||this.options.blockNetworkImage!==!0&&"loaded"!==this.options.blockNetworkImage||this.webview.setBlockNetworkImage(!1),t.group&&t.group.limit&&this._clearGroupByLimit(t.extras.__wap2app_group,t.group.limit)}},d._clearAnimation=function(e){if(this.relatedView&&this.relatedView instanceof h){var t=this.options,i=0;t.screenshot&&t.screenshot.animation&&t.screenshot.animation.clear.delay&&(i=t.screenshot.animation.clear.delay);var n=function(){this.relatedView.clear(function(){this.animating=!1}.bind(this))};i?setTimeout(function(){n.call(this)}.bind(this),i):n.call(this)}},d._backByView=function(){var e=this.options,t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),this.relatedView.animated?this.relatedView.clear():this.relatedView.back(i,n),this.webview.stop(),this.webview.close("none",0),plus.nativeUI.closeWaiting()},d._back=function(){var e=this.options,t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),plus.nativeUI.closeWaiting();var r=this.webview;if(e.parent&&"browser"!==e.parent&&(r=this.webview.parent(),r||(r=this.webview)),r.__wap2app_group)for(var a=r.__wap2app_group.split(l.W2A_GROUP_SPLIT),s=0;s<a.length;s++){var p=a[s];p!==r.id&&p!==plus.runtime.appid&&plus.webview.close(p,"none",0)}if(this.webview.__wap2app_preload)r.hide(i,n),setTimeout(function(){r.setStyle({zindex:-1})},n);else{if(r.id===plus.runtime.appid)return void console.log("W2A[w2aWebviewContext]["+r.id+"]:back.close.prevent");(function(e){var t=function(){this._handleShowBehindByBack(),e.close(i,n,{acceleration:o.qihoobrowser?"none":"auto"}),this.w2aContext.restoreWebview()};e.__wap2app_group?setTimeout(function(){t.call(this)}.bind(this),50):t.call(this)}).bind(this)(r)}var c=e.back;c.reload&&setTimeout(function(){this._handleBackReload(c.reload)}.bind(this),100)},d._handleBackReload=function(e){if("function"==typeof e&&(e=e(location.pathname,location)),"boolean"==typeof e?this.opener&&e&&(e=[this.opener.id]):"string"==typeof e&&(e=[e]),n.isArray(e)&&e.length)for(var t=0;t<e.length;t++){var i=plus.webview.getWebviewById(e[t]);i&&i.reload()}},d.close=function(){this._back()},d._backBySpa=function(){if(this.history.length){var e=(this.history[this.history.length-1],this.options),t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),a.back(i,n,this.webview.id,{delay:e.back.delay,showWaiting:e.back.showWaiting})}else this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))},d._backByWebview=function(e){this.webview.canBack(function(e){if(e.canBack)this.webview.overrideUrlLoading({mode:"allow",match:l.W2A_OVERRIDE_MATCH}),this.webview.id===l.W2A_BROWSER_CHILD_ID&&this.w2aContext.getBrowser().evalJS("wap2app_browser.showClose();"),setTimeout(function(){this.webview.back(),this.handleOverrideUrlLoadingReject()}.bind(this),50);else{var t=!1,i=this.w2aContext.w2aOptions;if(this.webview.id===plus.runtime.appid){var n=this.webview.getURL();if(n){var o=i.getWebviewOptionsByUrl(n);o.isHome||(t=!0)}}t?wap2app.open(i.homeWebviewOptions.url,{reload:!0}):this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))}}.bind(this))},d.back=function(e,t){if(t!==!1&&(this.loaded||this.webview.id===plus.runtime.appid))return void this.webview.evalJS("window.wap2app&&wap2app.back();");if(this.relatedView&&this.relatedView instanceof h&&this.animating){if(this.options.quit)return;return this.animating=!1,void this._backByView()}if(this.backing=!0,e=e!==!1,this.options.isRedirect&&(e=!0),e)"spa"!==this.options.mode||this.webview.id===l.W2A_BROWSER_CHILD_ID?this._backByWebview():this._backBySpa();else{var i=!1,n=this.w2aContext.w2aOptions;if(this.webview.id===plus.runtime.appid){var o=this.webview.getURL();if(o){var r=n.getWebviewOptionsByUrl(o);r.isHome||(i=!0)}}i?wap2app.open(n.homeWebviewOptions.url,{reload:!0}):this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))}},d.quit=function(){this.webview.evalJS("wap2app&&wap2app.quit()")},d.open=function(e,t,i){var o=this.options,a=r.getLocation(e);if(!o.overrideUrlLoading.block||!n.isMatch(a,{matchPathnames:o.overrideUrlLoading.block})){if(~l.W2A_OVERRIDE_IGNORE.indexOf(a.protocol))return void this.w2aContext.open("self",this.webview,e);if(~["http:","https:","file:"].indexOf(a.protocol)){var s=o.overrideUrlLoading.download;if("function"==typeof s){var p=s(a.pathname,a);if(p)return p.msg&&plus.nativeUI.toast(p.msg),void("allow"===p.mode&&plus.runtime.openURL(a.href))}var c=o.isRedirect?o.overrideUrlLoading.redirect:!1;if(!c){var h=this.w2aContext.w2aOptions.getRedirectWebviewOptionsByUrl(i);h&&(c=h.overrideUrlLoading.redirect,o.redirect_id=h.id,o.redirect_url=i,o.isRedirect=!0,o.overrideUrlLoading.redirect=c)}if(c){var u=!1,d=this._handleOverrideUrlLoadingRedirect(a,c);n.isObject(d)&&(e=d.url,d=d.type);var w="self";if("href"===d){var f=wap2app.isConfiged(e);f&&f!==this.webview.id&&(f===o.redirect_id&&(u=!0),w="blank")}else"blank"===d&&(u=!0,w="blank");if("blank"===w&&this._handleTemporary(e,o.overrideUrlLoading.temporary,t,i))return;this.w2aContext.open(w,this.webview,e,t,d,"blank"===w,function(e){"shown"===e&&setTimeout(function(){if(u&&this.webview.close("none"),"blank"===d){var e=c.reload;if(typeof e===!0&&(e=[this.opener.id]),"function"==typeof e&&(e=e(a.pathname,a)),"string"==typeof e&&(e=[e]),n.isArray(e))for(var t=0,i=e.length;i>t;t++){var o=plus.webview.getWebviewById(e[t]);
o&&o.reload()}}}.bind(this),0)}.bind(this))}else if("history"===o.mode){var d="href",f=wap2app.isConfiged(e),w="self",v=!1;f&&f!==this.webview.id&&(n.isArray(o.history)&&~o.history.indexOf(f)||(w="blank",v=!0)),"self"===w&&this.webview.id===l.W2A_BROWSER_CHILD_ID&&(v=!1),d&&this.w2aContext.open(w,this.webview,e,t,d,v)}else this._handleTemporary(e,o.overrideUrlLoading.temporary,t,i)||this._handleIgnore(e,t,i)}}},d._handleOverrideUrlLoadingRedirect=function(e,t){var i="href",o=!1;if(t.handle&&(o=t.handle()),!o){var a=!1,s=r.getLocation(this.options.redirect_url||this.options.url),l=t.paramName;if(l&&("function"==typeof l?a=l():"string"==typeof l&&(l={url:l}),!a)){if(l.url){var c=l.url;"string"==typeof c&&(c=[c]);for(var h=0;h<c.length&&!(a=n.getUrlParam(c[h],s.href));h++);}!a&&l.cookie&&l.cookie.url&&(a=p.get(l.cookie.url,l.cookie.name),a&&(a=decodeURIComponent(a))),!a&&l.localStorage&&(a=localStorage.getItem(l.localStorage)),!a&&l.sessionStorage&&(a=sessionStorage.getItem(l.sessionStorage)),a||(a=this.redirect_url)}if(a||(a=t.defaultUrl),a){var s=r.getLocation(a);"function"==typeof t.match?o=t.match(e.pathname,e,s.pathname,s):e.pathname===s.pathname&&(o=!0)}}if(o){if(o!==!0)return{type:"blank",url:o};i="blank"}return i},d._handleTemporary=function(e,t,i,n){if("function"==typeof t){var o=r.getLocation(e),a=t(o.pathname,o);if(a){"string"==typeof a&&(a={regex:a});var s=a.regex,p=plus.webview.getWebviewById(l.W2A_TEMPORARY_WEBVIEW_ID);return this._prepareLoading(),p?p.loadURL(e):p=plus.webview.create(e,l.W2A_TEMPORARY_WEBVIEW_ID),p.overrideUrlLoading({mode:"reject",match:s},function(e){var t=e.url;if("function"==typeof a.handle){var o=r.getLocation(t);t=a.handle(o.pathname,o),t||(t=e.url)}this.open(t,i,n),p.close("none")}.bind(this)),!0}}return!1},d._handleIgnore=function(e,t,i){var o=this.options,a=!1,s=!1,p=o.ignore,l=o.overrideUrlLoading.ignore,c=o.group,u=r.getLocation(e);if(p&&(a=n.isMatch(u,{matchPathnames:p})),a===!1&&l&&(a=n.isMatch(u,{matchPathnames:l})),a===!1&&c&&n.isMatch(u,{matchPathnames:c.matchPathnames}))return void this.w2aContext.open("blank",this.webview,e,t);if(a===!1&&o.matchPathnames&&n.isMatch(u,o)&&(a=!0),null!==a)if(a){var d=this._getLoadType(u,r.getLocation(i));d&&this.w2aContext.open("self",this.webview,e,t,d,s)}else this.relatedView&&this.relatedView instanceof h&&this.relatedView.setStopped(!0),this.w2aContext.open("blank",this.webview,e,t)},d.clear=function(){this.cleared=!0,this.webview.removeEventListener("loading",this.__loading),this.webview.removeEventListener("titleUpdate",this.__titleUpdate),this.webview.removeEventListener("loaded",this.__loaded),this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.loadedTimer&&clearTimeout(this.loadedTimer)},d.handleOverrideUrlLoadingReject=function(){var e=this.webview,t=this.options;setTimeout(function(){if("function"==typeof e.overrideUrlLoading&&t.overrideUrlLoading!==!1){var i=!1;e.overrideUrlLoading({mode:"reject",match:".*",exclude:t.overrideUrlLoading.exclude},function(n){if(i){var o=+new Date-i;if(50>o)return}i=+new Date;var r=t.overrideUrlLoading.handle;if("function"==typeof r){var a=r(n.url,e);a&&"string"==typeof a&&(n.url=a)}this.open(n.url,"",this.webview.getURL())}.bind(this))}}.bind(this),t.overrideUrlLoading.delay)},d._getLoadType=function(e,t){var i=this.options,o="href";if(this._isReplace(e)&&(o="replace"),"replace"!==o){var a=!1;"boolean"!=typeof i.reload?a=n.isMatch(r.getLocation(i.url),{matchPathnames:i.reload}):i.reload&&(a=!0),e.href!==t.href||a||e.hash!==t.hash&&(o="reload")}return o},d._isReplace=function(e){var t=!1,i=this.options.overrideUrlLoading.replace;return"boolean"==typeof i?t=i:i&&(t=n.isMatch(e,{matchPathnames:i})),t},e.exports=u},function(e,t,i){var n=i(6),o=i(12),r=i(14),a=i(34),s=a.globalOptions,p=a.webviewOptions,l=function(e){this._init(e)},c=l.prototype;c._init=function(e){this.globalOptions={},this.webviewsOptions={},this.homeWebviewOptions={},this.redirectWebviewOptions={},this.globalWebviewOptions={},this.defaultWebviewOptions=p,this._initGlobalOptions(e),this._initWebviewsOptions(e)},c._initGlobalOptions=function(e){var t=n.extend(s);e.lockOrientation&&(t.lockOrientation=e.lockOrientation),e.cookies&&(t.cookies=e.cookies),e.sms&&(t.sms=e.sms),e.feedback===!1?t.feedback=!1:n.isObject(e.feedback)&&(t.feedback=n.extend(t.feedback,e.feedback)),t.browser=n.extend(t.browser,e.browser),t.browser.header={height:parseInt(t.browser.styles[".header"].height,10)},this.globalOptions=t},c._initWebviewsOptions=function(e){var t={};this.globalWebviewOptions=e.globalOptions||e.options;for(var i in e.webviews){var o=this._initWebviewOptions(i,e.webviews[i]);if(i===r.W2A_LAUNCH_WEBVIEW_ID&&(o.quit=!0),i=o.quit?plus.runtime.appid:i,o.id=i,o.quit)o.isHome=!0,o.styles.render="always",o.styles.popGesture="none",o.network=!0,o.extras.__wap2app_type="home",this.homeWebviewOptions=o,o.pullToRefresh=!1;else if(o.overrideUrlLoading){var a=o.overrideUrlLoading.redirect;(a.paramName||a.defaultUrl||a.handle)&&(o.isRedirect=!0,this.redirectWebviewOptions[i]=this._handleRedirectWebviewOptions(o))}if(t[i]=o,o.group){for(var s=[i],p=o.group.matchPathnames,l=0;l<p.length;l++)s.push(i+"_"+l);var c=s.join(r.W2A_GROUP_SPLIT);for(o.extras.__wap2app_group=c,l=0;l<p.length;l++)t[i+"_"+l]=n.extend(o,{id:i+"_"+l,matchPathnames:p[l],isHome:!1,extras:{__wap2app_group:c}})}}var h=this._convertOldVersion(this.globalOptions.browser.webview);if(h.matchHostnames||h.matchPathnames){var o=this._initWebviewOptions(r.W2A_BROWSER_CHILD_ID);o=n.extend(o,h),o.parent="browser",o.dock=this.globalOptions.browser.dock,t[r.W2A_BROWSER_CHILD_ID]=o}this.webviewsOptions=t},c._handleRedirectWebviewOptions=function(e){return"boolean"==typeof e.back.history&&(e.back.history=!0),e},c._initWebviewOptions=function(e,t){"undefined"==typeof t?t=e&&~e.indexOf(r.W2A_WEBVIEW_ID)?{id:e}:{id:r.W2A_WEBVIEW_ID+Math.random(),url:e}:n.isObject(t)||(t={id:e,matchPathnames:t}),t=n.extend(this.globalWebviewOptions,t);var i=n.isObject(t)&&n.isObject(t.back)&&"undefined"!=typeof t.back.history,o=n.isObject(t)&&n.isObject(t.screenshot)&&t.screenshot.title,a=n.isObject(t)&&n.isObject(t.screenshot)&&t.screenshot.view;if(t=n.extend(p,this.globalWebviewOptions,t),this._convertOldVersion(t),"string"==typeof t.back&&(t.back=n.extend(p.back,{selector:t.back})),"string"==typeof t.screenshot&&(t.screenshot=n.extend(p.screenshot,{url:t.screenshot})),t.screenshot.title&&("boolean"==typeof t.screenshot.title&&(t.screenshot.title=n.extend(p.screenshot.title,{enable:!0})),o&&n.isObject(t.screenshot.title)&&(t.screenshot.title.enable=!0)),a){var s=t.screenshot.view;if("number"==typeof s){var l=s+"px";t.screenshot.view=n.extend(p.screenshot.view,{enable:!0,styles:{height:l},crop:{src:{height:l},dst:{height:l}}})}else if(n.isObject(s))if(s.height){var l=s.height+"px",c=s.dock;t.screenshot.view=n.extend(p.screenshot.view,{enable:!0,interceptTouchEvent:!!s.interceptTouchEvent,styles:{height:l,position:c?"dock":"absolute"},crop:{src:{height:l},dst:{height:l}},click:s.click||{}})}else t.screenshot.view.enable=!0}else t.screenshot.view=!1;t.screenshot.drawText&&n.isObject(t.screenshot.drawText)&&(t.screenshot.drawText=[t.screenshot.drawText]),"string"==typeof t.previewImage&&(t.previewImage=n.extend(p.previewImage,{selector:t.previewImage})),"boolean"==typeof t.gps&&(t.gps=n.extend(p.gps,{enable:t.gps})),!i&&"webview"===t.mode&&n.isArray(t.matchPathnames)&&(t.back.history=!1);var h=t.group,u=!1;if(h&&n.isArray(h.matchPathnames)&&h.matchPathnames.length){var d=h.matchPathnames;t.group.matchPathnames=d,h.drawText&&n.isObject(h.drawText)&&(t.group.drawText=[h.drawText]),t.styles.render="always",u=!0}u||(t.group=!1);var w={__wap2app_type:t.quit?"home":"normal"};return t.extras=n.extend(t.extras,w),t},c._convertOldVersion=function(e){return e.matchHostnames=e.matchHostnames||e.hostname,e.matchPathnames=e.matchPathnames||e.pathname,delete e.hostname,delete e.pathname,e.group&&e.group.pathname&&(e.group.matchPathnames=e.group.pathname,delete e.group.pathname),e},c.matchOptionsByUrl=function(e){for(var t in this.webviewsOptions){var i=this.webviewsOptions[t];if(n.isMatch(e,i))return i}return!1},c.getWebviewOptionsById=function(e){return this.webviewsOptions[e]||this._initWebviewOptions(e)},c.getRedirectWebviewOptionsByUrl=function(e){var t=o.getLocation(e);for(var i in this.redirectWebviewOptions){var r=this.redirectWebviewOptions[i];if(n.isMatch(t,r))return r}return!1},c.getWebviewOptionsByUrl=function(e){if(e){var t=!1,i=o.getLocation(e);if(i.href===this.homeWebviewOptions.url)return n.extend(this.homeWebviewOptions);if(t=this.matchOptionsByUrl(i))return n.extend(t);var a=this.globalOptions.browser.webview;if((a.matchHostnames||a.matchPathnames)&&n.isMatch(i,a))return n.extend(this._getWebviewOptionsById(r.W2A_BROWSER_CHILD_ID))}return n.extend(this._initWebviewOptions(e))},c.isConfiged=function(e){var t=this.matchOptionsByUrl(o.getLocation(e));return t&&t.id!==r.W2A_BROWSER_CHILD_ID?t.id:!1},e.exports=l},function(e,t){e.exports={globalOptions:{debug:!1,ignore:!1,lockOrientation:"portrait-primary",globalOptions:{},webviews:{},cookies:!1,sms:{match:{sign:!1,length:6},callback:{webviewId:!1,handle:!1}},feedback:{url:"http://stream.dcloud.net.cn/wap2app/feedback",params:{app_name:"",app_vendor:"",about:"",ci:"",di:""}},browser:{url:!1,webview:{mode:"history",matchHostnames:!1,matchPathnames:!1,reload:!0,pullToRefresh:!1},dock:!1,styles:{".header":{height:"44px","background-color":"#efefef"},".back,.close":{color:"#8e8e93"},".title":{color:"#252525"},".progressbar":{"background-color":"#b6b6b6"},".progressbar span":{"background-color":"#ed2e2b"}}},pullToRefresh:{webview:{matchHostnames:!1,matchPathnames:!1}},shortcut:{enable:!1}},webviewOptions:{mode:"webview",url:"",quit:!1,cps:!1,matchHostnames:!1,matchPathnames:!1,preload:!1,blockNetworkImage:!1,fixBottom:!1,fastclick:{className:"needsclick"},head:{handle:!1,point:{x:1,y:1},minWidth:window.innerWidth-50,maxHeight:70,placeholder:""},events:{titleUpdate:!0,loading:!0,loaded:!0},group:{matchPathnames:!1,placeholder:"#eee",limit:0,delay:0,report:{ignore:!1},activate:{container:!1,attribute:!1,itemMatch:!1,itemActiveClass:!1,activate:!1,deactivate:!1},drawText:{text:"",dst:{top:0,left:0,width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,frames:12,region:{top:0,bottom:0,left:0,right:0}}},styles:{popGesture:"close",hardwareAccelerated:!0,errorPage:"_www/__wap2apperror.html"},fixed:{selector:"",styles:!1},extras:{},network:!0,ignore:!1,previewImage:{url:!1,selector:!1,options:!1,eventType:"click"},listenResourceLoading:{match:!1},overrideUrlLoading:{exclude:"none",block:!1,download:function(e,t){return/\.apk$/i.test(t.href)?{mode:"reject",msg:"\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u4e0b\u8f7d"}:void 0},delay:800,handle:!1,ignore:!1,replace:!1,redirect:{handle:!1,match:!1,defaultUrl:!1,paramName:!1,reload:!1},temporary:!1},overrideResourceRequest:!1,appendJsFile:!1,delay:0,show:{eventType:"titleUpdate",eventTimeout:2e3,aniShow:"slide-in-right",duration:300,detectBlank:{point:{x:30,y:30}}},history:!1,showWaiting:{title:"",options:{modal:!1,back:"transmit",padlock:!0}},screenshot:{url:!1,handle:!1,title:{enable:!1,filter:!1,max:25,dst:{top:"0px",left:"0px",width:"100%",height:"44px"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},crop:80,drawText:{text:"",max:25,dst:{top:"0px",left:"0px",width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"},clear:{eventType:"loaded",delay:0}},view:{enable:!1,height:0,dock:!1,interceptTouchEvent:!1,styles:{top:"0px",left:"0px",width:"100%",height:"100%",dock:"top",position:"absolute"},crop:{src:{top:"0px",left:"0px",width:"100%",height:"100%"},dst:{top:"0px",left:"0px",width:"100%",height:"100%"}},click:{back:{rect:{top:0,left:0,width:60,height:60},handle:function(){wap2app.currentWebview().evalJS("wap2app&&wap2app.back();")}}}}},back:{delay:500,showWaiting:!1,handle:!1,enable:!0,mask:{offset:{x:1,y:100},eventType:"click",handle:!1},backbutton:!0,override:!0,history:!0,selector:"",eventType:"click",beforeBack:!1,reload:!1,animation:{type:"shrink",duration:200,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},loading:!1,loaded:!1,reload:!1,pullToRefresh:{support:!0,height:"100px",range:"300px",contentdown:{caption:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0"},contentover:{caption:"\u91ca\u653e\u7acb\u5373\u5237\u65b0"},contentrefresh:{caption:"\u6b63\u5728\u5237\u65b0..."}},injectStyle:!1,injectScript:!1,gps:{enable:!1,interval:1440,disabledMsg:"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd",forbiddenMsg:"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650"},share:!1,report:{"no-default-screenshot":"\u65e0\u9ed8\u8ba4\u6a21\u7248","double-head":"\u53cc\u6807\u9898\u680f","no-head":"\u65e0\u6807\u9898\u680f","no-head-dock":"\u65b0\u589e\u6807\u9898\u680fdock\u5fc5\u987b\u4e3atrue","download-tips":"\u9876\u90e8\u5305\u542b\u4e0b\u8f7d\u6761","tab-changed":"\u9009\u9879\u5361\u53d1\u751f\u53d8\u5316{url}",mask:"\u6709\u906e\u7f69{mask}"}}}},function(e,t,i){var n=i(6),o=i(23),r=i(14),a=function(e){this._init(e)},s=a.prototype;s._init=function(e){this.w2aOptions=e,this.webview=plus.webview.currentWebview(),this.webviewOptions=this.w2aOptions.homeWebviewOptions,~["http:","https:"].indexOf(window.location.protocol)&&(this.webviewOptions=this.w2aOptions.getWebviewOptionsByUrl(window.location.href),this._handleLaunchWebview()),plus.screen.lockOrientation(e.globalOptions.lockOrientation||"portrait-primary"),this.webview.setStyle(this.webviewOptions.styles),this._initCookies(this.w2aOptions.globalOptions.cookies),this.webviewOptions.isHome||this._handleCpsWebview(this.w2aOptions.homeWebviewOptions.url)},s._initCookies=function(e){if(e){e=n.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var i=e[t];i.url&&i.name&&o.set(i.url,i.name,i.value,i.expire)}}},s._handleLaunchWebview=function(){var e=this.webviewOptions.cps;if("string"==typeof e&&(e={"dcloud:streamapps":e}),n.isObject(e)){var t=e[plus.runtime.channel]||e["dcloud:streamapps"];t&&this._handleCpsWebview(t)}},s._handleCpsWebview=function(e){var t=plus.webview.create(e,r.W2A_CPS_WEBVIEW_ID,{blockNetworkImage:!0});setTimeout(function(){t&&(t.close(),t=null)}.bind(this),6e3),t.addEventListener("loaded",function(){if(t){var e=t.getURL();0===e.indexOf(this.w2aOptions.homeWebviewOptions.url)&&(t.close(),t=null)}}.bind(this))},s.handleOldVersion=function(){this.webview.appendJsFile("_www/__wap2app.js"),this.webview.appendJsFile("_www/__wap2appconfig.js");var e=this.w2aOptions.homeWebviewOptions.appendJsFile;if("string"==typeof e&&e&&(e=[e]),n.isArray(e))for(var t=0,i=e.length;i>t;t++)e[t]&&this.webview.appendJsFile("_www/"+e[t]);window.location.replace(this.w2aOptions.homeWebviewOptions.url)},e.exports=a}]);